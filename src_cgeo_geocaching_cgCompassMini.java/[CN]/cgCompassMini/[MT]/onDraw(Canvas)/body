{
  lock=true;
  super.onDraw(canvas);
  Double azimuthRelative=azimuth - heading;
  if (azimuthRelative < 0) {
    azimuthRelative=azimuthRelative + 360;
  }
 else   if (azimuthRelative >= 360) {
    azimuthRelative=azimuthRelative - 360;
  }
  canvas.setDrawFilter(setfil);
  int marginLeft=0;
  int marginTop=0;
  int compassArrowWidth=compassArrow.getWidth();
  int compassArrowHeight=compassArrow.getWidth();
  int canvasCenterX=(compassArrowWidth / 2) + ((getWidth() - compassArrowWidth) / 2);
  int canvasCenterY=(compassArrowHeight / 2) + ((getHeight() - compassArrowHeight) / 2);
  marginLeft=(getWidth() - compassArrowWidth) / 2;
  marginTop=(getHeight() - compassArrowHeight) / 2;
  canvas.rotate(-(azimuthRelative.floatValue()),canvasCenterX,canvasCenterY);
  canvas.drawBitmap(compassArrow,marginLeft,marginTop,null);
  canvas.rotate(azimuthRelative.floatValue(),canvasCenterX,canvasCenterY);
  canvas.setDrawFilter(remfil);
  lock=false;
}
