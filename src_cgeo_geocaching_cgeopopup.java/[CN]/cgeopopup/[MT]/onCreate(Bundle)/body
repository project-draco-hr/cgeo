{
  super.onCreate(savedInstanceState);
  activity=this;
  res=this.getResources();
  app=(cgeoapplication)this.getApplication();
  settings=new cgSettings(this,getSharedPreferences(cgSettings.preferences,0));
  base=new cgBase(app,settings,getSharedPreferences(cgSettings.preferences,0));
  warning=new cgWarning(this);
  setTheme(R.style.transparent);
  setContentView(R.layout.popup);
  base.setTitle(activity,res.getString(R.string.detail));
  Bundle extras=getIntent().getExtras();
  if (extras != null) {
    fromDetail=extras.getBoolean("fromdetail");
    geocode=extras.getString("geocode");
  }
  if (geocode == null || geocode.length() == 0) {
    warning.showToast(res.getString(R.string.err_detail_cache_find));
    finish();
    return;
  }
}
