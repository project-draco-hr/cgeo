{
switch (MapsforgeMapProvider.getMapsforgeSource(Settings.getMapSource())) {
case MapsforgeMapProvider.CYCLEMAP:
    setMapViewMode(MapViewMode.OPENCYCLEMAP_TILE_DOWNLOAD);
  break;
case MapsforgeMapProvider.OFFLINE:
if (MapDatabase.isValidMapFile(Settings.getMapFile())) {
  setMapViewMode(MapViewMode.CANVAS_RENDERER);
  super.setMapFile(Settings.getMapFile());
}
 else {
  setMapViewMode(MapViewMode.MAPNIK_TILE_DOWNLOAD);
}
break;
default :
setMapViewMode(MapViewMode.MAPNIK_TILE_DOWNLOAD);
}
}
