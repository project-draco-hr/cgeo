{
  if (newPoints != null && oldPoints != null) {
    for (    cgWaypoint old : oldPoints) {
      if (old != null) {
        boolean merged=false;
        if (old.name != null && old.name.length() > 0) {
          for (          cgWaypoint waypoint : newPoints) {
            if (waypoint != null && waypoint.name != null) {
              if (old.name.equalsIgnoreCase(waypoint.name)) {
                waypoint.merge(old);
                merged=true;
                break;
              }
            }
          }
        }
        if (!merged && (old.isUserDefined() || forceMerge)) {
          newPoints.add(old);
        }
      }
    }
  }
}
