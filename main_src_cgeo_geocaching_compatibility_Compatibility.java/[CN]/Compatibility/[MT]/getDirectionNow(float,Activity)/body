{
  if (isLevel8) {
    try {
      final int rotation=level8.getRotation(activity);
      if (rotation == Surface.ROTATION_90) {
        return directionNowPre + 90;
      }
 else       if (rotation == Surface.ROTATION_180) {
        return directionNowPre + 180;
      }
 else       if (rotation == Surface.ROTATION_270) {
        return directionNowPre + 270;
      }
    }
 catch (    final Exception e) {
      Log.e("Cannot call getRotation()",e);
    }
  }
 else {
    final Display display=activity.getWindowManager().getDefaultDisplay();
    final int rotation=display.getOrientation();
    if (rotation == Configuration.ORIENTATION_LANDSCAPE) {
      return directionNowPre + 90;
    }
  }
  return directionNowPre;
}
