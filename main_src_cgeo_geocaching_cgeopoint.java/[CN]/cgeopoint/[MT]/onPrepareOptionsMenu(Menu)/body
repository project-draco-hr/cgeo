{
  super.onPrepareOptionsMenu(menu);
  try {
    final Geopoint coords=getDestination();
    if (coords != null) {
      menu.findItem(MENU_NAVIGATE).setVisible(true);
      menu.findItem(MENU_COMPASS).setVisible(true);
      menu.findItem(MENU_CACHES_AROUND).setVisible(true);
    }
 else {
      menu.findItem(MENU_NAVIGATE).setVisible(false);
      menu.findItem(MENU_COMPASS).setVisible(false);
      menu.findItem(MENU_CACHES_AROUND).setVisible(false);
    }
    menu.findItem(MENU_CLEAR_HISTORY).setEnabled(!getHistoryOfSearchedLocations().isEmpty());
  }
 catch (  Exception e) {
  }
  return true;
}
