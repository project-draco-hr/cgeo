{
  super.onCreate(savedInstanceState);
  setTheme();
  setContentView(R.layout.spoilers);
  Bundle extras=getIntent().getExtras();
  if (extras != null) {
    geocode=extras.getString("geocode");
    img_type=extras.getInt("type",0);
  }
  if (img_type == SPOILER_IMAGE) {
    setTitle(res.getString(R.string.cache_spoiler_images_title));
  }
 else   if (img_type == LOG_IMAGE) {
    setTitle(res.getString(R.string.cache_log_images_title));
  }
  if (geocode == null) {
    showToast("Sorry, c:geo forgot for what cache you want to load spoiler images.");
    finish();
    return;
  }
switch (img_type) {
case LOG_IMAGE:
    title=extras.getString("title");
  url=extras.getString("url");
if ((title == null) || (url == null)) {
  showToast("Sorry, c:geo forgot which logimage you wanted to load.");
  finish();
  return;
}
break;
}
inflater=getLayoutInflater();
if (imagesView == null) {
imagesView=(LinearLayout)findViewById(R.id.spoiler_list);
}
switch (img_type) {
case SPOILER_IMAGE:
load_process_string=res.getString(R.string.cache_spoiler_images_loading);
save=true;
break;
case LOG_IMAGE:
load_process_string=res.getString(R.string.cache_log_images_loading);
if (settings.storelogimages) {
save=true;
}
 else {
save=false;
}
break;
default :
load_process_string=new String("Loading...");
}
waitDialog=ProgressDialog.show(this,null,load_process_string,true);
waitDialog.setCancelable(true);
switch (img_type) {
case LOG_IMAGE:
cgImage logimage=new cgImage();
logimage.title=title;
logimage.url=url;
logimage.description="";
images.add(logimage);
try {
loadImagesHandler.sendMessage(new Message());
}
 catch (Exception e) {
Log.e(cgSettings.tag,"cgeoimages.loadImagesHandler.sendMessage: " + e.toString());
}
break;
case SPOILER_IMAGE:
(new loadSpoilers()).start();
break;
default :
showToast("Sorry, can't load unknown image type.");
finish();
}
}
