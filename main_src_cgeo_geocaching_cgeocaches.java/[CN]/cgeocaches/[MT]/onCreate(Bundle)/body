{
  super.onCreate(savedInstanceState);
  setTheme();
  setContentView(R.layout.caches);
  Bundle extras=getIntent().getExtras();
  if (extras != null) {
    Object typeObject=extras.get(Intents.EXTRA_LIST_TYPE);
    type=(typeObject instanceof CacheListType) ? (CacheListType)typeObject : CacheListType.OFFLINE;
    coords=(Geopoint)extras.getParcelable(Intents.EXTRAS_COORDS);
  }
 else {
    extras=new Bundle();
  }
  if (isInvokedFromAttachment()) {
    type=CacheListType.OFFLINE;
    if (coords == null) {
      coords=new Geopoint(0.0,0.0);
    }
  }
  currentLoader=(AbstractSearchLoader)getSupportLoaderManager().initLoader(type.ordinal(),extras,this);
  if (CollectionUtils.isNotEmpty(cacheList)) {
    if (currentLoader.isStarted()) {
      showFooterLoadingCaches();
    }
 else {
      showFooterMoreCaches();
    }
  }
  setTitle(title);
  setAdapter();
  prepareFilterBar();
  if (isInvokedFromAttachment()) {
    importGpxAttachement();
  }
}
