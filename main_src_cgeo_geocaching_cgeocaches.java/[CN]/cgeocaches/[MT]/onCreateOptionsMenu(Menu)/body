{
  menu.add(0,MENU_FILTER,0,res.getString(R.string.caches_filter)).setIcon(R.drawable.ic_menu_filter);
  if (type != CacheListType.HISTORY) {
    menu.add(0,MENU_SORT,0,res.getString(R.string.caches_sort)).setIcon(R.drawable.ic_menu_sort_alphabetically);
  }
  menu.add(0,MENU_SWITCH_SELECT_MODE,0,res.getString(R.string.caches_select_mode)).setIcon(R.drawable.ic_menu_agenda);
  menu.add(0,MENU_INVERT_SELECTION,0,res.getString(R.string.caches_select_invert)).setIcon(R.drawable.ic_menu_mark);
  if (type == CacheListType.OFFLINE) {
    final SubMenu subMenu=menu.addSubMenu(0,SUBMENU_MANAGE_OFFLINE,0,res.getString(R.string.caches_manage)).setIcon(R.drawable.ic_menu_save);
    subMenu.add(0,MENU_DROP_CACHES,0,res.getString(R.string.caches_drop_all));
    subMenu.add(0,MENU_DROP_CACHES_AND_LIST,0,res.getString(R.string.caches_drop_all_and_list));
    subMenu.add(0,MENU_REFRESH_STORED,0,res.getString(R.string.cache_offline_refresh));
    subMenu.add(0,MENU_MOVE_TO_LIST,0,res.getString(R.string.cache_menu_move_list));
    subMenu.add(0,MENU_DELETE_EVENTS,0,res.getString(R.string.caches_delete_events));
    subMenu.add(0,MENU_CLEAR_OFFLINE_LOGS,0,res.getString(R.string.caches_clear_offlinelogs));
    subMenu.add(0,MENU_IMPORT_GPX,0,res.getString(R.string.gpx_import_title));
    if (Settings.getWebDeviceCode() != null) {
      subMenu.add(0,MENU_IMPORT_WEB,0,res.getString(R.string.web_import_title));
    }
    subMenu.add(0,MENU_EXPORT,0,res.getString(R.string.export));
  }
 else {
    if (type == CacheListType.HISTORY) {
      final SubMenu subMenu=menu.addSubMenu(0,SUBMENU_MANAGE_HISTORY,0,res.getString(R.string.caches_manage)).setIcon(R.drawable.ic_menu_save);
      subMenu.add(0,MENU_EXPORT,0,res.getString(R.string.export));
      subMenu.add(0,MENU_REMOVE_FROM_HISTORY,0,res.getString(R.string.cache_clear_history));
      subMenu.add(0,MENU_CLEAR_OFFLINE_LOGS,0,res.getString(R.string.caches_clear_offlinelogs));
      menu.add(0,MENU_REFRESH_STORED,0,res.getString(R.string.cache_offline_refresh)).setIcon(R.drawable.ic_menu_set_as);
    }
 else {
      menu.add(0,MENU_REFRESH_STORED,0,res.getString(R.string.caches_store_offline)).setIcon(R.drawable.ic_menu_set_as);
    }
  }
  navigationMenu=CacheListAppFactory.addMenuItems(menu,this,res);
  if (type == CacheListType.OFFLINE) {
    final SubMenu subMenu=menu.addSubMenu(0,SUBMENU_MANAGE_LISTS,0,res.getString(R.string.list_menu)).setIcon(R.drawable.ic_menu_more);
    subMenu.add(0,MENU_CREATE_LIST,0,res.getString(R.string.list_menu_create));
    subMenu.add(0,MENU_DROP_LIST,0,res.getString(R.string.list_menu_drop));
    subMenu.add(0,MENU_RENAME_LIST,0,res.getString(R.string.list_menu_rename));
    subMenu.add(0,MENU_SWITCH_LIST,0,res.getString(R.string.list_menu_change));
  }
  return true;
}
