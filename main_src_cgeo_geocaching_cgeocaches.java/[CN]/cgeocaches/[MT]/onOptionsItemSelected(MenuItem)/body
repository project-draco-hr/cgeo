{
  final int itemId=item.getItemId();
switch (itemId) {
case MENU_SWITCH_SELECT_MODE:
    adapter.switchSelectMode();
  invalidateOptionsMenuCompatible();
return true;
case MENU_REFRESH_STORED:
refreshStored(adapter.getCheckedOrAllCaches());
invalidateOptionsMenuCompatible();
return true;
case MENU_DROP_CACHES:
dropStored(false);
invalidateOptionsMenuCompatible();
return false;
case MENU_DROP_CACHES_AND_LIST:
dropStored(true);
invalidateOptionsMenuCompatible();
return true;
case MENU_IMPORT_GPX:
importGpx();
invalidateOptionsMenuCompatible();
return false;
case MENU_CREATE_LIST:
new StoredList.UserInterface(this).promptForListCreation(null);
invalidateOptionsMenuCompatible();
return false;
case MENU_DROP_LIST:
removeList(true);
invalidateOptionsMenuCompatible();
return false;
case MENU_RENAME_LIST:
renameList();
return false;
case MENU_INVERT_SELECTION:
adapter.invertSelection();
invalidateOptionsMenuCompatible();
return false;
case MENU_SWITCH_LIST:
selectList(null);
invalidateOptionsMenuCompatible();
return false;
case MENU_FILTER:
showFilterMenu(null);
return true;
case MENU_SORT:
final CacheComparator oldComparator=adapter.getCacheComparator();
new ComparatorUserInterface(this).selectComparator(oldComparator,new RunnableWithArgument<CacheComparator>(){
@Override public void run(CacheComparator selectedComparator){
if (selectedComparator != null && oldComparator != null && selectedComparator.getClass().equals(oldComparator.getClass())) {
adapter.toggleInverseSort();
}
 else {
adapter.resetInverseSort();
}
setComparator(selectedComparator);
}
}
);
return true;
case MENU_IMPORT_WEB:
importWeb();
return false;
case MENU_EXPORT:
ExportFactory.showExportMenu(adapter.getCheckedOrAllCaches(),this);
return false;
case MENU_REMOVE_FROM_HISTORY:
removeFromHistoryCheck();
invalidateOptionsMenuCompatible();
return false;
case MENU_MOVE_TO_LIST:
moveCachesToOtherList();
invalidateOptionsMenuCompatible();
return true;
case MENU_DELETE_EVENTS:
deletePastEvents();
invalidateOptionsMenuCompatible();
return true;
case MENU_CLEAR_OFFLINE_LOGS:
clearOfflineLogs();
invalidateOptionsMenuCompatible();
return true;
default :
return CacheListAppFactory.onMenuItemSelected(item,cacheList,this,search);
}
}
