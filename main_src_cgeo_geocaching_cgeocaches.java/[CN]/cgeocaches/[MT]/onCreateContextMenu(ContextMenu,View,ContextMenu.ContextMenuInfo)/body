{
  super.onCreateContextMenu(menu,view,info);
  if (adapter == null) {
    return;
  }
  AdapterContextMenuInfo adapterInfo=null;
  try {
    adapterInfo=(AdapterContextMenuInfo)info;
  }
 catch (  Exception e) {
    Log.w(Settings.tag,"cgeocaches.onCreateContextMenu: " + e.toString());
  }
  if (adapterInfo == null || adapterInfo.position >= adapter.getCount()) {
    return;
  }
  final cgCache cache=adapter.getItem(adapterInfo.position);
  if (StringUtils.isNotBlank(cache.getName())) {
    menu.setHeaderTitle(cache.getName());
  }
 else {
    menu.setHeaderTitle(cache.getGeocode());
  }
  if (cache.getCoords() != null) {
    menu.add(0,MENU_COMPASS,0,res.getString(R.string.cache_menu_compass));
    final SubMenu subMenu=menu.addSubMenu(1,0,0,res.getString(R.string.cache_menu_navigate)).setIcon(android.R.drawable.ic_menu_mapmode);
    NavigationAppFactory.addMenuItems(subMenu,this,res);
    addVisitMenu(menu,cache);
    menu.add(0,MENU_CACHE_DETAILS,0,res.getString(R.string.cache_menu_details));
  }
  if (cache.getReason() >= 1) {
    menu.add(0,MENU_DROP_CACHE,0,res.getString(R.string.cache_offline_drop));
    final List<cgList> cacheLists=app.getLists();
    final int listCount=cacheLists.size();
    if (listCount > 1) {
      final SubMenu submenu=menu.addSubMenu(0,MENU_MOVE_TO_LIST,0,res.getString(R.string.cache_menu_move_list));
      for (int i=0; i < listCount; i++) {
        cgList list=cacheLists.get(i);
        submenu.add(Menu.NONE,CONTEXT_MENU_MOVE_TO_LIST + list.id,Menu.NONE,list.title);
      }
    }
  }
}
