{
  final Resources res=activity.getResources();
  final ProgressDialog dialog=ProgressDialog.show(activity,res.getString(R.string.init_backup_restore),res.getString(R.string.init_restore_running),true,false);
  final AtomicBoolean restoreSuccessful=new AtomicBoolean(false);
  new Thread(){
    @Override public void run(){
      restoreSuccessful.set(DataStore.restoreDatabaseInternal());
      activity.runOnUiThread(new Runnable(){
        @Override public void run(){
          dialog.dismiss();
          boolean restored=restoreSuccessful.get();
          String message=restored ? res.getString(R.string.init_restore_success) : res.getString(R.string.init_restore_failed);
          ActivityMixin.helpDialog(activity,res.getString(R.string.init_backup_restore),message);
          if (activity instanceof MainActivity) {
            ((MainActivity)activity).updateCacheCounter();
          }
        }
      }
);
    }
  }
.start();
}
