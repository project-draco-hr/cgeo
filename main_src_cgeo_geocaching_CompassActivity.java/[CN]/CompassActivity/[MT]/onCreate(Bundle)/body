{
  super.onCreate(savedInstanceState,R.layout.compass_activity);
  final SensorManager sensorManager=(SensorManager)getSystemService(SENSOR_SERVICE);
  hasMagneticFieldSensor=sensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD) != null;
  if (!hasMagneticFieldSensor) {
    Settings.setUseCompass(false);
  }
  Bundle extras=getIntent().getExtras();
  if (extras != null) {
    final String geocode=extras.getString(EXTRAS_GEOCODE);
    if (StringUtils.isNotEmpty(geocode)) {
      cache=DataStore.loadCache(geocode,LoadFlags.LOAD_CACHE_OR_DB);
    }
    title=geocode;
    final String name=extras.getString(EXTRAS_NAME);
    dstCoords=extras.getParcelable(EXTRAS_COORDS);
    info=extras.getString(EXTRAS_CACHE_INFO);
    if (StringUtils.isNotBlank(name)) {
      if (StringUtils.isNotBlank(title)) {
        title+=": " + name;
      }
 else {
        title=name;
      }
    }
  }
 else {
    Intent pointIntent=new Intent(this,NavigateAnyPointActivity.class);
    startActivity(pointIntent);
    finish();
    return;
  }
  setTitle();
  setDestCoords();
  setCacheInfo();
  Views.inject(this);
  setVolumeControlStream(AudioManager.STREAM_MUSIC);
}
