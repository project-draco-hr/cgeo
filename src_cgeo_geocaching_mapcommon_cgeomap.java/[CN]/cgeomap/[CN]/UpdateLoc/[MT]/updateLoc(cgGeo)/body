{
  if (geo == null) {
    return;
  }
  try {
    if (overlayMyLoc == null && mapView != null) {
      overlayMyLoc=new cgMapMyOverlay(settings,activity);
      mapView.addOverlay(settings.getMapFactory().getOverlayBaseWrapper(overlayMyLoc));
    }
    if (overlayMyLoc != null && geo.location != null) {
      overlayMyLoc.setCoordinates(geo.location);
    }
    if (geo.latitudeNow != null && geo.longitudeNow != null) {
      if (followMyLocation == true) {
        myLocationInMiddle();
      }
 else {
        mapView.invalidate();
      }
    }
    if (settings.useCompass == 0 || (geo.speedNow != null && geo.speedNow > 5)) {
      if (geo.bearingNow != null) {
        overlayMyLoc.setHeading(geo.bearingNow);
      }
 else {
        overlayMyLoc.setHeading(new Double(0));
      }
    }
  }
 catch (  Exception e) {
    Log.w(cgSettings.tag,"Failed to update location.");
  }
}
