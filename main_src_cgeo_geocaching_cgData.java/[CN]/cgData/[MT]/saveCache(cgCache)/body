{
  if (cache == null) {
    return false;
  }
  ContentValues values=new ContentValues();
  if (cache.getUpdated() == 0) {
    values.put("updated",System.currentTimeMillis());
  }
 else {
    values.put("updated",cache.getUpdated());
  }
  values.put("reason",cache.getListId());
  values.put("detailed",cache.isDetailed() ? 1 : 0);
  values.put("detailedupdate",cache.getDetailedUpdate());
  values.put("visiteddate",cache.getVisitedDate());
  values.put("geocode",cache.getGeocode());
  values.put("cacheid",cache.getCacheId());
  values.put("guid",cache.getGuid());
  values.put("type",cache.getType().id);
  values.put("name",cache.getName());
  values.put("own",cache.isOwn() ? 1 : 0);
  values.put("owner",cache.getOwner());
  values.put("owner_real",cache.getOwnerReal());
  if (cache.getHiddenDate() == null) {
    values.put("hidden",0);
  }
 else {
    values.put("hidden",cache.getHiddenDate().getTime());
  }
  values.put("hint",cache.getHint());
  values.put("size",cache.getSize() == null ? "" : cache.getSize().id);
  values.put("difficulty",cache.getDifficulty());
  values.put("terrain",cache.getTerrain());
  values.put("latlon",cache.getLatlon());
  values.put("location",cache.getLocation());
  values.put("distance",cache.getDistance());
  values.put("direction",cache.getDirection());
  putCoords(values,cache.getCoords());
  values.put("reliable_latlon",cache.isReliableLatLon() ? 1 : 0);
  values.put("elevation",cache.getElevation());
  values.put("shortdesc",cache.getShortdesc());
  values.put("personal_note",cache.getPersonalNote());
  values.put("description",cache.getDescription());
  values.put("favourite_cnt",cache.getFavoritePoints());
  values.put("rating",cache.getRating());
  values.put("votes",cache.getVotes());
  values.put("myvote",cache.getMyVote());
  values.put("disabled",cache.isDisabled() ? 1 : 0);
  values.put("archived",cache.isArchived() ? 1 : 0);
  values.put("members",cache.isMembers() ? 1 : 0);
  values.put("found",cache.isFound() ? 1 : 0);
  values.put("favourite",cache.isFavourite() ? 1 : 0);
  values.put("inventoryunknown",cache.getInventoryItems());
  values.put("onWatchlist",cache.isOnWatchlist() ? 1 : 0);
  boolean statusOk=true;
  if (cache.getAttributes() != null) {
    if (!saveAttributes(cache.getGeocode(),cache.getAttributes())) {
      statusOk=false;
    }
  }
  if (cache.hasWaypoints()) {
    if (!saveWaypoints(cache.getGeocode(),cache.getWaypoints(),true)) {
      statusOk=false;
    }
  }
  if (cache.getSpoilers() != null) {
    if (!saveSpoilers(cache.getGeocode(),cache.getSpoilers())) {
      statusOk=false;
    }
  }
  if (cache.getLogs() != null) {
    if (!saveLogs(cache.getGeocode(),cache.getLogs())) {
      statusOk=false;
    }
  }
  if (MapUtils.isNotEmpty(cache.getLogCounts())) {
    if (!saveLogCount(cache.getGeocode(),cache.getLogCounts())) {
      statusOk=false;
    }
  }
  if (cache.getInventory() != null) {
    if (!saveInventory(cache.getGeocode(),cache.getInventory())) {
      statusOk=false;
    }
  }
  if (!statusOk) {
    cache.setDetailed(false);
    cache.setDetailedUpdate(0L);
  }
  init();
  try {
    int rows=databaseRW.update(dbTableCaches,values,"geocode = ?",new String[]{cache.getGeocode()});
    if (rows > 0) {
      values=null;
      return true;
    }
  }
 catch (  Exception e) {
  }
  try {
    long id=databaseRW.insert(dbTableCaches,null,values);
    if (id > 0) {
      values=null;
      return true;
    }
  }
 catch (  Exception e) {
  }
  values=null;
  return false;
}
