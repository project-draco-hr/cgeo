{
  init();
  final Set<String> geocodes=new HashSet<String>();
  if (!stored) {
    geocodes.addAll(cacheCache.getInViewport(viewport,cacheType));
  }
  final StringBuilder selection=new StringBuilder(buildCoordinateWhere(dbTableCaches,viewport));
  String[] selectionArgs=null;
  if (cacheType != CacheType.ALL) {
    selection.append(" and type = ?");
    selectionArgs=new String[]{String.valueOf(cacheType.id)};
  }
  if (stored) {
    selection.append(" and reason >= " + StoredList.STANDARD_LIST_ID);
  }
  try {
    final Cursor cursor=database.query(dbTableCaches,new String[]{"geocode"},selection.toString(),selectionArgs,null,null,null,"500");
    if (cursor.moveToFirst()) {
      final int index=cursor.getColumnIndex("geocode");
      do {
        geocodes.add(cursor.getString(index));
      }
 while (cursor.moveToNext());
    }
    cursor.close();
  }
 catch (  Exception e) {
    Log.e("cgData.loadInViewport: " + e.toString());
  }
  return new SearchResult(geocodes);
}
