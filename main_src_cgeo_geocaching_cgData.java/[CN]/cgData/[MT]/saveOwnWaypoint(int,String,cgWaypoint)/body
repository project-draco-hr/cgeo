{
  if ((StringUtils.isBlank(geocode) && id <= 0) || waypoint == null) {
    return false;
  }
  init();
  boolean ok=false;
  databaseRW.beginTransaction();
  try {
    ContentValues values=new ContentValues();
    values.put("geocode",geocode);
    values.put("updated",System.currentTimeMillis());
    values.put("type",waypoint.getWaypointType() != null ? waypoint.getWaypointType().id : null);
    values.put("prefix",waypoint.getPrefix());
    values.put("lookup",waypoint.getLookup());
    values.put("name",waypoint.getName());
    values.put("latlon",waypoint.getLatlon());
    putCoords(values,waypoint.getCoords());
    values.put("note",waypoint.getNote());
    values.put("own",waypoint.isUserDefined() ? 1 : 0);
    if (id <= 0) {
      final long rowId=databaseRW.insert(dbTableWaypoints,null,values);
      waypoint.setId((int)rowId);
      ok=true;
    }
 else {
      final int rows=databaseRW.update(dbTableWaypoints,values,"_id = " + id,null);
      if (rows > 0) {
        ok=true;
      }
 else {
        ok=false;
      }
    }
    databaseRW.setTransactionSuccessful();
  }
  finally {
    databaseRW.endTransaction();
  }
  return ok;
}
