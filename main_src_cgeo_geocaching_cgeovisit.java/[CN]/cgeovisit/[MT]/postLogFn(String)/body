{
  int status=-1;
  try {
    if (tweetBox == null) {
      tweetBox=(LinearLayout)findViewById(R.id.tweet_box);
    }
    if (tweetCheck == null) {
      tweetCheck=(CheckBox)findViewById(R.id.tweet);
    }
    status=base.postLog(app,geocode,cacheid,viewstates,typeSelected,date.get(Calendar.YEAR),(date.get(Calendar.MONTH) + 1),date.get(Calendar.DATE),log,trackables);
    if (status == 1) {
      cgLog logNow=new cgLog();
      logNow.author=Settings.getUsername();
      logNow.date=date.getTimeInMillis();
      logNow.type=typeSelected;
      logNow.log=log;
      if (cache != null && null != cache.logs) {
        cache.logs.add(0,logNow);
      }
      app.addLog(geocode,logNow);
      if (typeSelected == cgBase.LOG_FOUND_IT) {
        app.markFound(geocode);
        if (cache != null) {
          cache.found=true;
        }
      }
      if (cache != null) {
        app.putCacheInCache(cache);
      }
 else {
        app.removeCacheFromCache(geocode);
      }
    }
    if (status == 1) {
      app.clearLogOffline(geocode);
    }
    if (status == 1 && typeSelected == cgBase.LOG_FOUND_IT && Settings.isUseTwitter() && Settings.isTwitterLoginValid() && tweetCheck.isChecked() && tweetBox.getVisibility() == View.VISIBLE) {
      cgBase.postTweetCache(app,geocode);
    }
    if (status == 1 && typeSelected == cgBase.LOG_FOUND_IT && Settings.isGCvoteLogin()) {
      GCVote.setRating(cache,rating);
    }
    return status;
  }
 catch (  Exception e) {
    Log.e(Settings.tag,"cgeovisit.postLogFn: " + e.toString());
  }
  return 1000;
}
