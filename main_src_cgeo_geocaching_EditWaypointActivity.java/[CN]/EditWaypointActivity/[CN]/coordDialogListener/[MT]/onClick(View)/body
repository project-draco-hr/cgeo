{
  Geopoint gp=null;
  if (waypoint != null && waypoint.getCoords() != null) {
    gp=waypoint.getCoords();
  }
 else   if (gpTemp != null) {
    gp=gpTemp;
  }
  cgCache cache=cgData.loadCache(geocode,LoadFlags.LOAD_WAYPOINTS);
  cgeocoords coordsDialog=new cgeocoords(EditWaypointActivity.this,cache,gp,app.currentGeo());
  coordsDialog.setCancelable(true);
  coordsDialog.setOnCoordinateUpdate(new cgeocoords.CoordinateUpdate(){
    @Override public void update(    final Geopoint gp){
      ((Button)findViewById(R.id.buttonLatitude)).setText(gp.format(GeopointFormatter.Format.LAT_DECMINUTE));
      ((Button)findViewById(R.id.buttonLongitude)).setText(gp.format(GeopointFormatter.Format.LON_DECMINUTE));
      if (waypoint != null) {
        waypoint.setCoords(gp);
      }
 else {
        gpTemp=gp;
      }
    }
  }
);
  coordsDialog.show();
}
