{
  if (geo == null) {
    return;
  }
  try {
    if (navType == null || navLocation == null || navAccuracy == null) {
      navType=(TextView)findViewById(R.id.nav_type);
      navAccuracy=(TextView)findViewById(R.id.nav_accuracy);
      navSatellites=(TextView)findViewById(R.id.nav_satellites);
      navLocation=(TextView)findViewById(R.id.nav_location);
    }
    if (geo.latitudeNow != null && geo.longitudeNow != null) {
      LinearLayout findNearest=(LinearLayout)findViewById(R.id.nearest);
      findNearest.setClickable(true);
      findNearest.setOnClickListener(new cgeoFindNearestListener());
      View findNearestView=(View)findNearest.findViewById(R.id.view_nearest);
      findNearestView.setBackgroundResource(R.drawable.main_nearby);
      String satellites=null;
      if (geo.satellitesVisible != null && geo.satellitesFixed != null && geo.satellitesFixed > 0) {
        satellites=res.getString(R.string.loc_sat) + ": " + geo.satellitesFixed+ "/"+ geo.satellitesVisible;
      }
 else       if (geo.satellitesVisible != null) {
        satellites=res.getString(R.string.loc_sat) + ": 0/" + geo.satellitesVisible;
      }
 else {
        satellites="";
      }
      navSatellites.setText(satellites);
      if (geo.gps == -1) {
        navType.setText(res.getString(R.string.loc_last));
      }
 else       if (geo.gps == 0) {
        navType.setText(res.getString(R.string.loc_net));
      }
 else {
        navType.setText(res.getString(R.string.loc_gps));
      }
      if (geo.accuracyNow != null) {
        if (settings.units == cgSettings.unitsImperial) {
          navAccuracy.setText("??" + String.format(Locale.getDefault(),"%.0f",(geo.accuracyNow * 3.2808399)) + " ft");
        }
 else {
          navAccuracy.setText("??" + String.format(Locale.getDefault(),"%.0f",geo.accuracyNow) + " m");
        }
      }
 else {
        navAccuracy.setText(null);
      }
      if (settings.showAddress == 1) {
        if (addLat == null || addLon == null) {
          navLocation.setText(res.getString(R.string.loc_no_addr));
        }
        if (addLat == null || addLon == null || (cgBase.getDistance(geo.latitudeNow,geo.longitudeNow,addLat,addLon) > 0.5 && addressObtaining == false)) {
          (new obtainAddress()).start();
        }
      }
 else {
        if (geo.altitudeNow != null) {
          String humanAlt;
          if (settings.units == cgSettings.unitsImperial) {
            humanAlt=String.format("%.0f",(geo.altitudeNow * 3.2808399)) + " ft";
          }
 else {
            humanAlt=String.format("%.0f",geo.altitudeNow) + " m";
          }
          navLocation.setText(base.formatCoordinate(geo.latitudeNow,"lat",true) + " | " + base.formatCoordinate(geo.longitudeNow,"lon",true)+ " | "+ humanAlt);
        }
 else {
          navLocation.setText(base.formatCoordinate(geo.latitudeNow,"lat",true) + " | " + base.formatCoordinate(geo.longitudeNow,"lon",true));
        }
      }
    }
 else {
      LinearLayout findNearest=(LinearLayout)findViewById(R.id.nearest);
      findNearest.setClickable(false);
      findNearest.setOnClickListener(null);
      View findNearestView=(View)findNearest.findViewById(R.id.view_nearest);
      findNearestView.setBackgroundResource(R.drawable.main_nearby_disabled);
      navType.setText(null);
      navAccuracy.setText(null);
      navLocation.setText(res.getString(R.string.loc_trying));
    }
  }
 catch (  Exception e) {
    Log.w(cgSettings.tag,"Failed to update location.");
  }
}
