{
  final String deviceName=((EditText)findViewById(R.id.webDeviceName)).getText().toString();
  final String deviceCode=prefs.getString("webDeviceCode",null);
  if (deviceName == null || deviceName.length() == 0) {
    showToast(res.getString(R.string.err_missing_device_name));
    return;
  }
  webDialog=ProgressDialog.show(cgeoinit.this,res.getString(R.string.init_sendToCgeo),res.getString(R.string.init_sendToCgeo_registering),true);
  webDialog.setCancelable(false);
  (new Thread(){
    @Override public void run(){
      int pin=0;
      String nam=deviceName == null ? "" : deviceName;
      String cod=deviceCode == null ? "" : deviceCode;
      String params="name=" + cgBase.urlencode_rfc3986(nam) + "&code="+ cgBase.urlencode_rfc3986(cod);
      cgResponse response=base.request(false,"send2.cgeo.org","/auth.html","GET",params,0,true);
      if (response.getStatusCode() == 200) {
        String[] strings=response.getData().split(",");
        try {
          pin=Integer.parseInt(strings[1].trim());
        }
 catch (        Exception e) {
          Log.e(cgSettings.tag,"webDialog: " + e.toString());
        }
        String code=strings[0];
        settings.setWebNameCode(nam,code);
      }
      webAuthHandler.sendEmptyMessage(pin);
    }
  }
).start();
}
