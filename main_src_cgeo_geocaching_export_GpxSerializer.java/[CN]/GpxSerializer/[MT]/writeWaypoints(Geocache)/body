{
  final List<Waypoint> waypoints=cache.getWaypoints();
  final List<Waypoint> ownWaypoints=new ArrayList<Waypoint>(waypoints.size());
  final List<Waypoint> originWaypoints=new ArrayList<Waypoint>(waypoints.size());
  for (  final Waypoint wp : cache.getWaypoints()) {
    if (wp.isUserDefined()) {
      ownWaypoints.add(wp);
    }
 else {
      originWaypoints.add(wp);
    }
  }
  int maxPrefix=0;
  for (  final Waypoint wp : originWaypoints) {
    final String prefix=wp.getPrefix();
    try {
      final int numericPrefix=Integer.parseInt(prefix);
      maxPrefix=Math.max(numericPrefix,maxPrefix);
    }
 catch (    final NumberFormatException ex) {
    }
    writeCacheWaypoint(wp,prefix);
  }
  for (  final Waypoint wp : ownWaypoints) {
    maxPrefix++;
    final String prefix=StringUtils.leftPad(String.valueOf(maxPrefix),2,'0');
    writeCacheWaypoint(wp,prefix);
  }
}
