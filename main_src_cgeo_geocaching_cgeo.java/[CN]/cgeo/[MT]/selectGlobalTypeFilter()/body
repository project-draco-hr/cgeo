{
  final List<CacheType> cacheTypes=new ArrayList<CacheType>();
  cacheTypes.add(CacheType.ALL);
  cacheTypes.add(CacheType.TRADITIONAL);
  cacheTypes.add(CacheType.MULTI);
  cacheTypes.add(CacheType.MYSTERY);
  List<CacheType> sorted=new ArrayList<CacheType>();
  sorted.addAll(Arrays.asList(CacheType.values()));
  sorted.removeAll(cacheTypes);
  Collections.sort(sorted,new Comparator<CacheType>(){
    @Override public int compare(    CacheType left,    CacheType right){
      return left.getL10n().compareToIgnoreCase(right.getL10n());
    }
  }
);
  cacheTypes.addAll(sorted);
  int checkedItem=cacheTypes.indexOf(Settings.getCacheType());
  if (checkedItem < 0) {
    checkedItem=0;
  }
  String[] items=new String[cacheTypes.size()];
  for (int i=0; i < cacheTypes.size(); i++) {
    items[i]=cacheTypes.get(i).getL10n();
  }
  Builder builder=new AlertDialog.Builder(this);
  builder.setTitle(R.string.menu_filter);
  builder.setSingleChoiceItems(items,checkedItem,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int position){
      CacheType cacheType=cacheTypes.get(position);
      Settings.setCacheType(cacheType);
      setFilterTitle();
      dialog.dismiss();
    }
  }
);
  builder.create().show();
}
