{
  super.onCreateContextMenu(menu,v,menuInfo);
  if (v.getId() == R.id.search_offline) {
    List<cgList> cacheLists=app.getLists();
    int listCount=cacheLists.size();
    menu.setHeaderTitle(res.getString(R.string.list_title));
    for (int i=0; i < listCount; i++) {
      cgList list=cacheLists.get(i);
      menu.add(Menu.NONE,MENU_OPEN_LIST + list.id,Menu.NONE,list.title);
    }
    return;
  }
  menu.setHeaderTitle(res.getString(R.string.menu_filter));
  menu.add(1,0,0,res.getString(R.string.all_types));
  menu.add(1,1,0,res.getString(R.string.traditional));
  menu.add(1,2,0,res.getString(R.string.multi));
  menu.add(1,3,0,res.getString(R.string.mystery));
  Map<String,String> allTypes=new HashMap<String,String>(cgBase.cacheTypesInv);
  allTypes.remove("traditional");
  allTypes.remove("multi");
  allTypes.remove("mystery");
  List<String> sorted=new ArrayList<String>(allTypes.values());
  Collections.sort(sorted);
  for (  String choice : sorted) {
    menu.add(1,menu.size(),0,choice);
  }
  menu.setGroupCheckable(1,true,true);
  boolean foundItem=false;
  int itemCount=menu.size();
  if (Settings.getCacheType() != null) {
    String typeTitle=cgBase.cacheTypesInv.get(Settings.getCacheType());
    if (typeTitle != null) {
      for (int i=0; i < itemCount; i++) {
        if (menu.getItem(i).getTitle().equals(typeTitle)) {
          menu.getItem(i).setChecked(true);
          foundItem=true;
          break;
        }
      }
    }
  }
  if (!foundItem) {
    menu.getItem(0).setChecked(true);
  }
}
