{
  if (app == null) {
    return;
  }
  if (cleanupRunning) {
    return;
  }
  boolean more=false;
  if (version != Settings.getVersion()) {
    Log.i(Settings.tag,"Initializing hard cleanup - version changed from " + Settings.getVersion() + " to "+ version+ ".");
    more=true;
  }
  cleanupRunning=true;
  app.cleanDatabase(more);
  cleanupRunning=false;
  if (version != null && version > 0) {
    SharedPreferences.Editor edit=prefs.edit();
    edit.putInt("version",version);
    edit.commit();
  }
}
