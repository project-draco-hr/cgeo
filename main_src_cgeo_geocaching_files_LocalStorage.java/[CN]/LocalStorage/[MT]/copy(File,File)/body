{
  destination.getParentFile().mkdirs();
  InputStream input;
  OutputStream output;
  try {
    input=new FileInputStream(source);
    output=new FileOutputStream(destination);
  }
 catch (  FileNotFoundException e) {
    Log.e(Settings.tag,"LocalStorage.copy: could not open file",e);
    return false;
  }
  byte[] buffer=new byte[4096];
  int length;
  try {
    while ((length=input.read(buffer)) > 0) {
      output.write(buffer,0,length);
    }
    output.flush();
  }
 catch (  IOException e) {
    Log.e(Settings.tag,"LocalStorage.copy: error when copying file",e);
    return false;
  }
  try {
    input.close();
    output.close();
  }
 catch (  IOException e) {
    Log.e(Settings.tag,"LocalStorage.copy: could not close file",e);
    return false;
  }
  return true;
}
