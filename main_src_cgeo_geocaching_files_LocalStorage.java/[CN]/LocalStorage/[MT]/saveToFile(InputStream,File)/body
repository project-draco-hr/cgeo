{
  if (inputStream == null) {
    return false;
  }
  try {
    try {
      final FileOutputStream fos=new FileOutputStream(targetFile);
      final boolean written=copy(inputStream,fos);
      fos.close();
      if (!written) {
        targetFile.delete();
      }
      return written;
    }
  finally {
      inputStream.close();
    }
  }
 catch (  IOException e) {
    Log.e("LocalStorage.saveToFile",e);
    targetFile.delete();
  }
  return false;
}
