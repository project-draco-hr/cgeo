{
  if (inputStream == null) {
    return false;
  }
  try {
    try {
      final FileOutputStream fos=new FileOutputStream(targetFile);
      final boolean written=copy(inputStream,fos);
      fos.close();
      if (!written) {
        FileUtils.deleteIgnoringFailure(targetFile);
      }
      return written;
    }
  finally {
      IOUtils.closeQuietly(inputStream);
    }
  }
 catch (  IOException e) {
    Log.e("LocalStorage.saveToFile",e);
    FileUtils.deleteIgnoringFailure(targetFile);
  }
  return false;
}
