{
  final double latSigned=gp.getLatitude();
  final double lonSigned=gp.getLongitude();
  final double lat=Math.abs(latSigned);
  final double lon=Math.abs(lonSigned);
  final double latFloor=Math.floor(lat);
  final double lonFloor=Math.floor(lon);
  final double latMin=(lat - latFloor) * 60;
  final double lonMin=(lon - lonFloor) * 60;
  final char latDir=latSigned < 0 ? 'S' : 'N';
  final char lonDir=lonSigned < 0 ? 'W' : 'E';
switch (format) {
case LAT_LON_DECDEGREE:
    return String.format("%.6f %.6f",latSigned,lonSigned);
case LAT_LON_DECDEGREE_COMMA:
  return String.format((Locale)null,"%.6f,%.6f",latSigned,lonSigned);
case LAT_LON_DECMINUTE:
return String.format("%c %02.0f?? %.3f %c %03.0f?? %.3f",latDir,latFloor,latMin,lonDir,lonFloor,lonMin);
case LAT_LON_DECMINUTE_PIPE:
return String.format("%c %02.0f?? %.3f | %c %03.0f?? %.3f",latDir,latFloor,latMin,lonDir,lonFloor,lonMin);
case LAT_DECDEGREE_RAW:
return String.format((Locale)null,"%.6f",latSigned);
case LAT_DECMINUTE:
return String.format("%c %02.0f?? %.3f",latDir,latFloor,latMin);
case LAT_DECMINUTE_RAW:
return String.format("%c %02.0f %.3f",latDir,latFloor,latMin);
case LON_DECDEGREE_RAW:
return String.format((Locale)null,"%.6f",lonSigned);
case LON_DECMINUTE:
return String.format("%c %03.0f?? %.3f",lonDir,lonFloor,lonMin);
case LON_DECMINUTE_RAW:
return String.format("%c %03.0f %.3f",lonDir,lonFloor,lonMin);
}
return null;
}
