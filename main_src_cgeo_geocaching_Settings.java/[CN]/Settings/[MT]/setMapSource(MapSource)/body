{
  if (!MapProviderFactory.isSameActivity(getMapSource(),newMapSource)) {
    mapProvider=null;
  }
  editSharedSettings(new PrefRunnable(){
    @Override public void edit(    Editor edit){
      edit.putInt(KEY_MAP_SOURCE,newMapSource.getNumericalId());
    }
  }
);
  if (newMapSource instanceof OfflineMapSource) {
    setMapFile(((OfflineMapSource)newMapSource).getFileName());
  }
}
