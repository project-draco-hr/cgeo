{
  context=contextIn;
  app=appIn;
  geoUpdate=geoUpdateIn;
  time=timeIn;
  distance=distanceIn;
  if (prefs == null) {
    prefs=context.getSharedPreferences(Settings.preferences,0);
  }
  distanceNow=prefs.getFloat("dst",0f);
  if (Double.isNaN(distanceNow)) {
    distanceNow=0d;
  }
  if (distanceNow == 0f) {
    final SharedPreferences.Editor prefsEdit=context.getSharedPreferences(Settings.preferences,0).edit();
    if (prefsEdit != null) {
      prefsEdit.putLong("dst-since",System.currentTimeMillis());
      prefsEdit.commit();
    }
  }
  geoNetListener=new cgeoGeoListener();
  geoNetListener.setProvider(LocationManager.NETWORK_PROVIDER);
  geoGpsListener=new cgeoGeoListener();
  geoGpsListener.setProvider(LocationManager.GPS_PROVIDER);
  geoGpsStatusListener=new cgeoGpsStatusListener();
}
