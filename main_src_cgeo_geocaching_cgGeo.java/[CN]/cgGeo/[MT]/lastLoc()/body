{
  assign(cgeoapplication.getInstance().getLastCoords());
  Location lastGps=geoManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
  if (lastGps != null) {
    lastGps.setProvider("last");
    assign(lastGps);
    Log.i(Settings.tag,"Using last location from GPS");
    return;
  }
  Location lastGsm=geoManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
  if (lastGsm != null) {
    lastGsm.setProvider("last");
    assign(lastGsm);
    Log.i(Settings.tag,"Using last location from NETWORK");
    return;
  }
}
