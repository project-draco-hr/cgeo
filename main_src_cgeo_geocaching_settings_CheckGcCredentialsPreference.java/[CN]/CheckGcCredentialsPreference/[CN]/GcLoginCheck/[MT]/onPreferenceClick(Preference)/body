{
  this.activity=(Activity)CheckGcCredentialsPreference.this.getContext();
  this.res=activity.getResources();
  ImmutablePair<String,String> credentials=Settings.getGcLogin();
  if (credentials == null || StringUtils.isBlank(credentials.getLeft()) || StringUtils.isBlank(credentials.getRight())) {
    ActivityMixin.showToast(activity,R.string.err_missing_auth);
    return false;
  }
  loginDialog=ProgressDialog.show(activity,res.getString(R.string.init_login_popup),res.getString(R.string.init_login_popup_working),true);
  loginDialog.setCancelable(false);
  Cookies.clearCookies();
  (new Thread(){
    @Override public void run(){
      final StatusCode loginResult=Login.login();
      Object payload=loginResult;
      if (loginResult == StatusCode.NO_ERROR) {
        Login.detectGcCustomDate();
        payload=Login.downloadAvatarAndGetMemberStatus();
      }
      logInHandler.obtainMessage(0,payload).sendToTarget();
    }
  }
).start();
  return false;
}
