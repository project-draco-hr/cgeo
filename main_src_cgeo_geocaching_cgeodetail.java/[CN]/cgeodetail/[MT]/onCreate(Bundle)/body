{
  super.onCreate(savedInstanceState);
  setTheme();
  setContentView(R.layout.detail);
  setTitle(res.getString(R.string.cache));
  init();
  final Bundle extras=getIntent().getExtras();
  final Uri uri=getIntent().getData();
  if (geocode == null && extras != null) {
    geocode=extras.getString("geocode");
    name=extras.getString("name");
    guid=extras.getString("guid");
  }
  if (geocode == null && guid == null && uri != null) {
    String uriHost=uri.getHost().toLowerCase();
    String uriPath=uri.getPath().toLowerCase();
    String uriQuery=uri.getQuery();
    if (uriQuery != null) {
      Log.i(Settings.tag,"Opening URI: " + uriHost + uriPath+ "?"+ uriQuery);
    }
 else {
      Log.i(Settings.tag,"Opening URI: " + uriHost + uriPath);
    }
    if (uriHost.contains("geocaching.com")) {
      geocode=uri.getQueryParameter("wp");
      guid=uri.getQueryParameter("guid");
      if (StringUtils.isNotBlank(geocode)) {
        geocode=geocode.toUpperCase();
        guid=null;
      }
 else       if (StringUtils.isNotBlank(guid)) {
        geocode=null;
        guid=guid.toLowerCase();
      }
 else {
        showToast(res.getString(R.string.err_detail_open));
        finish();
        return;
      }
    }
 else     if (uriHost.contains("coord.info")) {
      if (uriPath != null && uriPath.startsWith("/gc")) {
        geocode=uriPath.substring(1).toUpperCase();
      }
 else {
        showToast(res.getString(R.string.err_detail_open));
        finish();
        return;
      }
    }
  }
  if (geocode == null && guid == null) {
    showToast(res.getString(R.string.err_detail_cache));
    finish();
    return;
  }
  app.setAction(geocode);
  try {
    if (StringUtils.isNotBlank(name)) {
      waitDialog=ProgressDialog.show(this,name,res.getString(R.string.cache_dialog_loading_details),true,true);
    }
 else     if (StringUtils.isNotBlank(geocode)) {
      waitDialog=ProgressDialog.show(this,geocode.toUpperCase(),res.getString(R.string.cache_dialog_loading_details),true,true);
    }
 else {
      waitDialog=ProgressDialog.show(this,res.getString(R.string.cache),res.getString(R.string.cache_dialog_loading_details),true,true);
    }
  }
 catch (  Exception e) {
  }
  disableResumeSetView=true;
  threadCache=new loadCache(loadCacheHandler);
  threadCache.start();
}
