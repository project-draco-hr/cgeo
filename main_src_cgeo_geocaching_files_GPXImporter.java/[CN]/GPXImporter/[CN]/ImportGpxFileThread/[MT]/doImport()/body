{
  Log.i(Settings.tag,"Import GPX file: " + cacheFile.getAbsolutePath());
  importStepHandler.sendMessage(importStepHandler.obtainMessage(IMPORT_STEP_READ_FILE,R.string.gpx_import_loading_caches,(int)cacheFile.length()));
  Collection<cgCache> caches;
  GPXParser parser;
  try {
    parser=new GPX10Parser(listId);
    caches=parser.parse(cacheFile,progressHandler);
  }
 catch (  ParserException pe) {
    parser=new GPX11Parser(listId);
    caches=parser.parse(cacheFile,progressHandler);
  }
  final File wptsFile=new File(cacheFile.getParentFile(),getWaypointsFileNameForGpxFileName(cacheFile.getName()));
  if (wptsFile.canRead()) {
    Log.i(Settings.tag,"Import GPX waypoint file: " + wptsFile.getAbsolutePath());
    importStepHandler.sendMessage(importStepHandler.obtainMessage(IMPORT_STEP_READ_WPT_FILE,R.string.gpx_import_loading_waypoints,(int)wptsFile.length()));
    caches=parser.parse(wptsFile,progressHandler);
  }
  return caches;
}
