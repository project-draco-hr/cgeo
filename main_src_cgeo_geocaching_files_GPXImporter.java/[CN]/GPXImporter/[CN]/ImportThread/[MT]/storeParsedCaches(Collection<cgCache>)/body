{
  final SearchResult search=new SearchResult();
  final cgeoapplication app=cgeoapplication.getInstance();
  int storedCaches=0;
  for (  cgCache cache : caches) {
    search.addCache(cache);
    if (app.saveCache(cache,EnumSet.of(SaveFlag.SAVE_DB))) {
      storedCaches++;
    }
    if (progressHandler.isCancelled()) {
      throw new CancellationException();
    }
    progressHandler.sendMessage(progressHandler.obtainMessage(0,storedCaches,0));
  }
  return search;
}
