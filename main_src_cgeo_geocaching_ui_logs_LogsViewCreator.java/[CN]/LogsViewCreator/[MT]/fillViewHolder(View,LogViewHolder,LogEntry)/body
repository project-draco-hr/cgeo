{
  if (log.date > 0) {
    holder.date.setText(Formatter.formatShortDateVerbally(log.date));
    holder.date.setVisibility(View.VISIBLE);
  }
 else {
    holder.date.setVisibility(View.GONE);
  }
  holder.type.setText(log.type.getL10n());
  holder.author.setText(StringEscapeUtils.unescapeHtml4(log.author));
  fillCountOrLocation(holder,log);
  String logText=log.log;
  if (TextUtils.containsHtml(logText)) {
    logText=log.getDisplayText();
    final HtmlImageCounter imageCounter=new HtmlImageCounter();
    final UnknownTagsHandler unknownTagsHandler=new UnknownTagsHandler();
    holder.text.setText(Html.fromHtml(logText,imageCounter,unknownTagsHandler),TextView.BufferType.SPANNABLE);
    if (imageCounter.getImageCount() > 0) {
      final LogImageLoader loader=new LogImageLoader(holder);
      loader.execute(logText);
    }
  }
 else {
    holder.text.setText(logText,TextView.BufferType.SPANNABLE);
  }
  if (log.hasLogImages()) {
    holder.images.setText(log.getImageTitles());
    holder.images.setVisibility(View.VISIBLE);
    holder.images.setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View v){
        ImagesActivity.startActivityLogImages(activity,getGeocode(),new ArrayList<Image>(log.getLogImages()));
      }
    }
);
  }
 else {
    holder.images.setVisibility(View.GONE);
  }
  final int marker=log.type.markerId;
  if (marker != 0) {
    holder.marker.setVisibility(View.VISIBLE);
    holder.marker.setImageResource(marker);
  }
 else {
    holder.marker.setVisibility(View.GONE);
  }
  if (null == convertView) {
    holder.author.setOnClickListener(createUserActionsListener());
    holder.text.setMovementMethod(AnchorAwareLinkMovementMethod.getInstance());
    holder.text.setOnClickListener(new DecryptTextClickListener(holder.text));
    activity.registerForContextMenu(holder.text);
  }
}
