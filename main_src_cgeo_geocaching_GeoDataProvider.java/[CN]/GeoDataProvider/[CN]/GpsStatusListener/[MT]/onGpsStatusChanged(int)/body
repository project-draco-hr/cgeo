{
  boolean changed=false;
switch (event) {
case GpsStatus.GPS_EVENT_FIRST_FIX:
case GpsStatus.GPS_EVENT_SATELLITE_STATUS:
{
      final GpsStatus status=geoManager.getGpsStatus(null);
      int visible=0;
      int fixed=0;
      for (      final GpsSatellite satellite : status.getSatellites()) {
        if (satellite.usedInFix()) {
          fixed++;
        }
        visible++;
      }
      if (visible != satellitesVisible || fixed != satellitesFixed) {
        satellitesVisible=visible;
        satellitesFixed=fixed;
        changed=true;
      }
      break;
    }
case GpsStatus.GPS_EVENT_STARTED:
  if (!gpsEnabled) {
    gpsEnabled=true;
    changed=true;
  }
break;
case GpsStatus.GPS_EVENT_STOPPED:
if (gpsEnabled) {
gpsEnabled=false;
satellitesFixed=0;
satellitesVisible=0;
changed=true;
}
break;
default :
throw new IllegalStateException();
}
if (changed) {
selectBest();
}
}
