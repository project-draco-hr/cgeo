{
  final PagerAdapter adapter=view.getAdapter();
  if (adapter == null) {
    throw new IllegalStateException("ViewPager does not have adapter instance.");
  }
  if (!(adapter instanceof TitleProvider)) {
    throw new IllegalStateException("ViewPager adapter must implement TitleProvider to be used with TitlePageIndicator.");
  }
  mViewPager=view;
  mViewPager.setOnPageChangeListener(this);
  mTitleProvider=(TitleProvider)adapter;
  invalidate();
}
