{
  if (app == null) {
    Log.e(cgSettings.tag,"cgeoBase.searchByOffline: No application found");
    return null;
  }
  Geopoint coords=null;
  String cachetype=null;
  Integer list=1;
  if (parameters.containsKey("latitude") && parameters.containsKey("longitude")) {
    coords=new Geopoint((Double)parameters.get("latitude"),(Double)parameters.get("longitude"));
  }
  if (parameters.containsKey("cachetype")) {
    cachetype=(String)parameters.get("cachetype");
  }
  if (parameters.containsKey("list")) {
    list=(Integer)parameters.get("list");
  }
  final cgSearch search=app.getBatchOfStoredCaches(true,coords,cachetype,list);
  search.totalCnt=app.getAllStoredCachesCount(true,cachetype,list);
  return search.getCurrentId();
}
