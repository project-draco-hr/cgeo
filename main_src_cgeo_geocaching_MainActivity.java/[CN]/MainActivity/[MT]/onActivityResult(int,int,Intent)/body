{
  final IntentResult scanResult=IntentIntegrator.parseActivityResult(requestCode,resultCode,intent);
  if (scanResult != null) {
    final String scan=scanResult.getContents();
    if (StringUtils.isBlank(scan)) {
      return;
    }
    SearchActivity.startActivityScan(scan,this);
  }
 else   if (requestCode == SEARCH_REQUEST_CODE) {
    if (resultCode == RESULT_CANCELED) {
      String query=intent.getStringExtra(SearchManager.QUERY);
      if (query == null) {
        query="";
      }
      Dialogs.message(this,res.getString(R.string.unknown_scan) + "\n\n" + query);
    }
  }
}
