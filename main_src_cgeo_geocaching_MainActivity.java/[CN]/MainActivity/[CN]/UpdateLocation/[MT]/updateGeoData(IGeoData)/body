{
  final View nearestView=findViewById(R.id.nearest);
  final TextView navType=(TextView)findViewById(R.id.nav_type);
  final TextView navAccuracy=(TextView)findViewById(R.id.nav_accuracy);
  final TextView navLocation=(TextView)findViewById(R.id.nav_location);
  try {
    if (geo.getCoords() != null) {
      if (!nearestView.isClickable()) {
        nearestView.setFocusable(true);
        nearestView.setClickable(true);
        nearestView.setOnClickListener(new OnClickListener(){
          @Override public void onClick(          View v){
            cgeoFindNearest(v);
          }
        }
);
        nearestView.setBackgroundResource(R.drawable.main_nearby);
      }
      navType.setText(res.getString(geo.getLocationProvider().resourceId));
      if (geo.getAccuracy() >= 0) {
        int speed=Math.round(geo.getSpeed()) * 60 * 60 / 1000;
        navAccuracy.setText("??" + Units.getDistanceFromMeters(geo.getAccuracy()) + Formatter.SEPARATOR+ Units.getSpeed(speed));
      }
 else {
        navAccuracy.setText(null);
      }
      if (Settings.isShowAddress()) {
        if (addCoords == null) {
          navLocation.setText(res.getString(R.string.loc_no_addr));
        }
        if (addCoords == null || (geo.getCoords().distanceTo(addCoords) > 0.5 && !addressObtaining)) {
          (new ObtainAddressThread()).start();
        }
      }
 else {
        if (geo.getAltitude() != 0.0) {
          final String humanAlt=Units.getDistanceFromKilometers((float)geo.getAltitude() / 1000);
          navLocation.setText(geo.getCoords() + " | " + humanAlt);
        }
 else {
          navLocation.setText(geo.getCoords().toString());
        }
      }
    }
 else {
      if (nearestView.isClickable()) {
        nearestView.setFocusable(false);
        nearestView.setClickable(false);
        nearestView.setOnClickListener(null);
        nearestView.setBackgroundResource(R.drawable.main_nearby_disabled);
      }
      navType.setText(null);
      navAccuracy.setText(null);
      navLocation.setText(res.getString(R.string.loc_trying));
    }
  }
 catch (  Exception e) {
    Log.w("Failed to update location.");
  }
}
