{
  BitmapFactory.Options options=new BitmapFactory.Options();
  options.inJustDecodeBounds=true;
  FileInputStream fis=null;
  try {
    fis=new FileInputStream(file);
    BitmapFactory.decodeStream(fis,null,options);
  }
 catch (  FileNotFoundException e) {
    e.printStackTrace();
  }
 finally {
    if (fis != null) {
      try {
        fis.close();
      }
 catch (      IOException e) {
        e.printStackTrace();
      }
    }
  }
  int scale=1;
  if (options.outHeight > maxHeight || options.outWidth > maxWidth) {
    scale=Math.max(options.outHeight / maxHeight,options.outWidth / maxWidth);
  }
  bfOptions.inSampleSize=scale;
}
