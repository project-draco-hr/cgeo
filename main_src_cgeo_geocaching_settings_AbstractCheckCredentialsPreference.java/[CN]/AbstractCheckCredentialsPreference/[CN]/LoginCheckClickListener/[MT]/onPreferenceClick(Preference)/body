{
  final Resources res=activity.getResources();
  final ImmutablePair<String,String> credentials=getCredentials();
  if (StringUtils.isBlank(credentials.getLeft()) || StringUtils.isBlank(credentials.getRight())) {
    ActivityMixin.showToast(activity,R.string.err_missing_auth);
    return false;
  }
  final ProgressDialog loginDialog=ProgressDialog.show(activity,res.getString(R.string.init_login_popup),res.getString(R.string.init_login_popup_working),true);
  loginDialog.setCancelable(false);
  Cookies.clearCookies();
  AndroidObservable.fromActivity(activity,Observable.defer(new Func0<Observable<ImmutablePair<StatusCode,Drawable>>>(){
    @Override public Observable<ImmutablePair<StatusCode,Drawable>> call(){
      return Observable.from(login());
    }
  }
).subscribeOn(Schedulers.io())).subscribe(new Action1<ImmutablePair<StatusCode,Drawable>>(){
    @Override public void call(    final ImmutablePair<StatusCode,Drawable> loginInfo){
      loginDialog.dismiss();
      if (loginInfo.getLeft() == StatusCode.NO_ERROR) {
        Dialogs.message(activity,R.string.init_login_popup,R.string.init_login_popup_ok,loginInfo.getRight());
      }
 else {
        Dialogs.message(activity,R.string.init_login_popup,res.getString(R.string.init_login_popup_failed_reason) + " " + loginInfo.getLeft().getErrorString(res)+ ".");
      }
      activity.initBasicMemberPreferences();
    }
  }
);
  return false;
}
