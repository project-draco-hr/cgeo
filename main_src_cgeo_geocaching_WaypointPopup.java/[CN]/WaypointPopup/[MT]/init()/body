{
  super.init();
  waypoint=app.loadWaypoint(waypointId);
  try {
    if (StringUtils.isNotBlank(waypoint.getName())) {
      setTitle(waypoint.getName());
    }
 else {
      setTitle(waypoint.getGeocode().toUpperCase());
    }
    ((TextView)findViewById(R.id.actionbar_title)).setCompoundDrawablesWithIntrinsicBounds(getResources().getDrawable(waypoint.getWaypointType().markerId),null,null,null);
    details=new CacheDetailsCreator(this,(LinearLayout)findViewById(R.id.waypoint_details_list));
    details.add(R.string.cache_geocode,waypoint.getPrefix().toUpperCase() + waypoint.getGeocode().toUpperCase().substring(2));
    final Button buttonEdit=(Button)findViewById(R.id.edit);
    buttonEdit.setOnClickListener(new OnClickListener(){
      @Override public void onClick(      View arg0){
        cgeowaypointadd.startActivityEditWaypoint(WaypointPopup.this,waypoint.getId());
        finish();
      }
    }
);
    details=new CacheDetailsCreator(this,(LinearLayout)findViewById(R.id.details_list));
    details.add(R.string.cache_name,cache.getName());
    addCacheDetails();
  }
 catch (  Exception e) {
    Log.e("cgeopopup.init: " + e.toString());
  }
}
