{
  List<cgWaypoint> waypoints=cache.getWaypoints();
  List<cgWaypoint> ownWaypoints=new ArrayList<cgWaypoint>(waypoints.size());
  List<cgWaypoint> originWaypoints=new ArrayList<cgWaypoint>(waypoints.size());
  for (  cgWaypoint wp : cache.getWaypoints()) {
    if (wp.isUserDefined()) {
      ownWaypoints.add(wp);
    }
 else {
      originWaypoints.add(wp);
    }
  }
  int maxPrefix=0;
  for (  cgWaypoint wp : originWaypoints) {
    String prefix=wp.getPrefix();
    try {
      maxPrefix=Math.max(Integer.parseInt(prefix),maxPrefix);
    }
 catch (    NumberFormatException ex) {
      Log.e("Unexpected origin waypoint prefix='" + prefix + "'",ex);
    }
    writeCacheWaypoint(wp,prefix);
  }
  for (  cgWaypoint wp : ownWaypoints) {
    maxPrefix++;
    String prefix=StringUtils.leftPad(String.valueOf(maxPrefix),2,'0');
    writeCacheWaypoint(wp,prefix);
  }
}
