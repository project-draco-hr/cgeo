{
  AlertDialog.Builder builder=new AlertDialog.Builder(activity);
  View layout=View.inflate(new ContextThemeWrapper(activity,R.style.dark),R.layout.gpx_export_dialog,null);
  builder.setView(layout);
  final TextView text=(TextView)layout.findViewById(R.id.info);
  text.setText(getString(R.string.export_gpx_info,Settings.getGpxExportDir()));
  final CheckBox shareOption=(CheckBox)layout.findViewById(R.id.share);
  shareOption.setChecked(Settings.getShareAfterExport());
  shareOption.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setShareAfterExport(shareOption.isChecked());
    }
  }
);
  builder.setPositiveButton(R.string.export,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      dialog.dismiss();
      new ExportTask(caches,activity).execute((Void)null);
    }
  }
);
  return builder.create();
}
