{
  String usernameNow=prefs.getString("username",null);
  if (usernameNow != null) {
    ((EditText)findViewById(R.id.username)).setText(usernameNow);
  }
  String passwordNow=prefs.getString("password",null);
  if (usernameNow != null) {
    ((EditText)findViewById(R.id.password)).setText(passwordNow);
  }
  Button logMeIn=(Button)findViewById(R.id.log_me_in);
  logMeIn.setOnClickListener(new logIn());
  TextView legalNote=(TextView)findViewById(R.id.legal_note);
  legalNote.setClickable(true);
  legalNote.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View arg0){
      startActivity(new Intent(Intent.ACTION_VIEW,Uri.parse("http://www.geocaching.com/about/termsofuse.aspx")));
    }
  }
);
  String passvoteNow=prefs.getString("pass-vote",null);
  if (passvoteNow != null) {
    ((EditText)findViewById(R.id.passvote)).setText(passvoteNow);
  }
  TextView go4cache=(TextView)findViewById(R.id.about_go4cache);
  go4cache.setClickable(true);
  go4cache.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View arg0){
      startActivity(new Intent(Intent.ACTION_VIEW,Uri.parse("http://go4cache.com/")));
    }
  }
);
  final CheckBox publicButton=(CheckBox)findViewById(R.id.publicloc);
  publicButton.setChecked(Settings.isPublicLoc());
  publicButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setPublicLoc(publicButton.isChecked());
    }
  }
);
  Button authorizeTwitter=(Button)findViewById(R.id.authorize_twitter);
  authorizeTwitter.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View arg0){
      Intent authIntent=new Intent(cgeoinit.this,cgeoauth.class);
      startActivity(authIntent);
    }
  }
);
  final CheckBox twitterButton=(CheckBox)findViewById(R.id.twitter_option);
  twitterButton.setChecked(Settings.isUseTwitter() && Settings.isTwitterLoginValid());
  twitterButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setUseTwitter(twitterButton.isChecked());
      if (Settings.isUseTwitter() && !Settings.isTwitterLoginValid()) {
        Intent authIntent=new Intent(cgeoinit.this,cgeoauth.class);
        startActivity(authIntent);
      }
      twitterButton.setChecked(Settings.isUseTwitter());
    }
  }
);
  EditText sigEdit=(EditText)findViewById(R.id.signature);
  if (sigEdit.getText().length() == 0) {
    sigEdit.setText(Settings.getSignature());
  }
  Button sigBtn=(Button)findViewById(R.id.signature_help);
  sigBtn.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View v){
      helpDialog(res.getString(R.string.init_signature_help_title),res.getString(R.string.init_signature_help_text));
    }
  }
);
  Button templates=(Button)findViewById(R.id.signature_template);
  registerForContextMenu(templates);
  templates.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View v){
      enableTemplatesMenu=true;
      openContextMenu(v);
      enableTemplatesMenu=false;
    }
  }
);
  final CheckBox autoinsertButton=(CheckBox)findViewById(R.id.sigautoinsert);
  autoinsertButton.setChecked(Settings.isAutoInsertSignature());
  autoinsertButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setAutoInsertSignature(autoinsertButton.isChecked());
    }
  }
);
  final CheckBox skinButton=(CheckBox)findViewById(R.id.skin);
  skinButton.setChecked(Settings.isLightSkin());
  skinButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setLightSkin(skinButton.isChecked());
    }
  }
);
  final CheckBox addressButton=(CheckBox)findViewById(R.id.address);
  addressButton.setChecked(Settings.isShowAddress());
  addressButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setShowAddress(addressButton.isChecked());
    }
  }
);
  final CheckBox captchaButton=(CheckBox)findViewById(R.id.captcha);
  captchaButton.setChecked(Settings.isShowCaptcha());
  captchaButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setShowCaptcha(captchaButton.isChecked());
    }
  }
);
  final CheckBox dirImgButton=(CheckBox)findViewById(R.id.loaddirectionimg);
  dirImgButton.setChecked(Settings.getLoadDirImg());
  dirImgButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setLoadDirImg(!Settings.getLoadDirImg());
      dirImgButton.setChecked(Settings.getLoadDirImg());
    }
  }
);
  final CheckBox useEnglishButton=(CheckBox)findViewById(R.id.useenglish);
  useEnglishButton.setChecked(Settings.isUseEnglish());
  useEnglishButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setUseEnglish(useEnglishButton.isChecked());
    }
  }
);
  final CheckBox excludeButton=(CheckBox)findViewById(R.id.exclude);
  excludeButton.setChecked(Settings.isExcludeMyCaches());
  excludeButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setExcludeMine(excludeButton.isChecked());
    }
  }
);
  final CheckBox disabledButton=(CheckBox)findViewById(R.id.disabled);
  disabledButton.setChecked(Settings.isExcludeDisabledCaches());
  disabledButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setExcludeDisabledCaches(disabledButton.isChecked());
    }
  }
);
  TextView showWaypointsThreshold=(TextView)findViewById(R.id.showwaypointsthreshold);
  showWaypointsThreshold.setText("" + prefs.getInt("gcshowwaypointsthreshold",0));
  final CheckBox autovisitButton=(CheckBox)findViewById(R.id.trackautovisit);
  autovisitButton.setChecked(Settings.isTrackableAutoVisit());
  autovisitButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setTrackableAutoVisit(autovisitButton.isChecked());
    }
  }
);
  final CheckBox offlineButton=(CheckBox)findViewById(R.id.offline);
  offlineButton.setChecked(Settings.isStoreOfflineMaps());
  offlineButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setStoreOfflineMaps(offlineButton.isChecked());
    }
  }
);
  final CheckBox saveLogImgButton=(CheckBox)findViewById(R.id.save_log_img);
  saveLogImgButton.setChecked(Settings.isStoreLogImages());
  saveLogImgButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setStoreLogImages(saveLogImgButton.isChecked());
    }
  }
);
  final CheckBox autoloadButton=(CheckBox)findViewById(R.id.autoload);
  autoloadButton.setChecked(Settings.isAutoLoadDescription());
  autoloadButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setAutoLoadDesc(autoloadButton.isChecked());
    }
  }
);
  final CheckBox livelistButton=(CheckBox)findViewById(R.id.livelist);
  livelistButton.setChecked(Settings.isLiveList());
  livelistButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setLiveList(livelistButton.isChecked());
    }
  }
);
  final CheckBox unitsButton=(CheckBox)findViewById(R.id.units);
  unitsButton.setChecked(!Settings.isUseMetricUnits());
  unitsButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setUseMetricUnits(!unitsButton.isChecked());
    }
  }
);
  final CheckBox gnavButton=(CheckBox)findViewById(R.id.gnav);
  gnavButton.setChecked(Settings.isUseGoogleNavigation());
  gnavButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setUseGoogleNavigation(gnavButton.isChecked());
    }
  }
);
  final CheckBox logOffline=(CheckBox)findViewById(R.id.log_offline);
  logOffline.setChecked(Settings.getLogOffline());
  logOffline.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setLogOffline(!Settings.getLogOffline());
      logOffline.setChecked(Settings.getLogOffline());
    }
  }
);
  final CheckBox browserButton=(CheckBox)findViewById(R.id.browser);
  browserButton.setChecked(Settings.isBrowser());
  browserButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Settings.setAsBrowser(browserButton.isChecked());
    }
  }
);
  EditText altitudeEdit=(EditText)findViewById(R.id.altitude);
  altitudeEdit.setText("" + prefs.getInt("altcorrection",0));
  String webDeviceName=Settings.getWebDeviceName();
  if (StringUtils.isNotBlank(webDeviceName)) {
    ((EditText)findViewById(R.id.webDeviceName)).setText(webDeviceName);
  }
 else {
    String s=android.os.Build.MODEL;
    ((EditText)findViewById(R.id.webDeviceName)).setText(s);
  }
  Button webAuth=(Button)findViewById(R.id.sendToCgeo_register);
  webAuth.setOnClickListener(new webAuth());
  Spinner mapSourceSelector=(Spinner)findViewById(R.id.mapsource);
  ArrayAdapter<CharSequence> adapter=ArrayAdapter.createFromResource(this,R.array.map_sources,android.R.layout.simple_spinner_item);
  adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
  mapSourceSelector.setAdapter(adapter);
  int mapsource=prefs.getInt("mapsource",0);
  mapSourceSelector.setSelection(mapsource);
  mapSourceSelector.setOnItemSelectedListener(new cgeoChangeMapSource());
  initMapfileEdittext(false);
  Button selectMapfile=(Button)findViewById(R.id.select_mapfile);
  selectMapfile.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Intent selectIntent=new Intent(cgeoinit.this,cgSelectMapfile.class);
      startActivityForResult(selectIntent,SELECT_MAPFILE_REQUEST);
    }
  }
);
  refreshBackupLabel();
}
