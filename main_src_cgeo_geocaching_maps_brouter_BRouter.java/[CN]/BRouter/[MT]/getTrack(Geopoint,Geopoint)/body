{
  if (brouter == null) {
    return null;
  }
  final Bundle params=new Bundle();
  params.putString("trackFormat","gpx");
  params.putString("v","foot");
  params.putDoubleArray("lats",new double[]{start.getLatitude(),dest.getLatitude()});
  params.putDoubleArray("lons",new double[]{start.getLongitude(),dest.getLongitude()});
  params.putString("v",Settings.getRoutingMode());
  final String gpx=brouter.getTrackFromParams(params);
  final LinkedList<Geopoint> result=new LinkedList<>();
  Xml.parse(gpx,new DefaultHandler(){
    @Override public void startElement(    final String uri,    final String localName,    final String qName,    final Attributes atts) throws SAXException {
      if (qName.equalsIgnoreCase("trkpt")) {
        final String lat=atts.getValue("lat");
        if (lat != null) {
          final String lon=atts.getValue("lon");
          if (lon != null) {
            result.add(new Geopoint(lat,lon));
          }
        }
      }
    }
  }
);
  return result.toArray(new Geopoint[result.size()]);
}
