{
  float kilometers=position.distanceTo(target);
  if (Settings.isUseMetricUnits()) {
    if (kilometers >= 5.0) {
      int quantity=Math.round(kilometers);
      return getQuantityString(R.plurals.tts_kilometers,quantity,String.valueOf(quantity));
    }
    if (kilometers >= 1.0) {
      float precision1=Math.round(kilometers * 10.0f) / 10.0f;
      float precision0=Math.round(kilometers);
      if (precision1 == precision0) {
        int quantity=(int)precision0;
        return getQuantityString(R.plurals.tts_kilometers,quantity,String.valueOf(quantity));
      }
      String digits=String.format(Locale.getDefault(),"%.1f",kilometers);
      return getQuantityString(R.plurals.tts_kilometers,9,digits);
    }
    int meters=(int)Math.round(kilometers * 1000.0);
    if (meters > 50) {
      meters=(int)Math.round(meters / 10.0) * 10;
    }
    return getQuantityString(R.plurals.tts_meters,meters,String.valueOf(meters));
  }
  float miles=kilometers / IConversion.MILES_TO_KILOMETER;
  if (miles >= 3.0) {
    int quantity=Math.round(miles);
    return getQuantityString(R.plurals.tts_miles,quantity,String.valueOf(quantity));
  }
  if (miles >= 0.2) {
    float precision1=Math.round(miles * 10.0f) / 10.0f;
    float precision0=Math.round(miles);
    if (precision1 == precision0) {
      int quantity=(int)precision0;
      return getQuantityString(R.plurals.tts_miles,quantity,String.valueOf(quantity));
    }
    String digits=String.format(Locale.getDefault(),"%.1f",miles);
    return getQuantityString(R.plurals.tts_miles,9,digits);
  }
  int feet=(int)(kilometers * 1000.0 * IConversion.METERS_TO_FEET);
  if (feet > 300) {
    feet=(int)Math.round(feet / 10.0) * 10;
  }
  return getQuantityString(R.plurals.tts_feet,feet,String.valueOf(feet));
}
