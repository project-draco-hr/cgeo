{
  final List<CacheListApp> activeApps=new ArrayList<CacheListApp>(LazyHolder.apps.length);
  for (  final CacheListApp app : LazyHolder.apps) {
    if (app.isInstalled()) {
      activeApps.add(app);
    }
  }
switch (activeApps.size()) {
case 0:
    return null;
case 1:
  return menu.add(0,activeApps.get(0).getId(),0,activeApps.get(0).getName()).setIcon(R.drawable.ic_menu_mapmode);
default :
final SubMenu subMenu=menu.addSubMenu(0,101,0,res.getString(R.string.caches_on_map)).setIcon(R.drawable.ic_menu_mapmode);
for (final CacheListApp app : activeApps) {
subMenu.add(0,app.getId(),0,app.getName());
}
return subMenu.getItem();
}
}
