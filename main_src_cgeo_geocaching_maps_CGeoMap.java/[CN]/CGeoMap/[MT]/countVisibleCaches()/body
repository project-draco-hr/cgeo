{
  final List<cgCache> protectedCaches=caches.getAsList();
  int count=0;
  if (protectedCaches.size() > 0) {
    final GeoPointImpl mapCenter=mapView.getMapViewCenter();
    final int mapCenterLat=mapCenter.getLatitudeE6();
    final int mapCenterLon=mapCenter.getLongitudeE6();
    final int mapSpanLat=mapView.getLatitudeSpan();
    final int mapSpanLon=mapView.getLongitudeSpan();
    for (    cgCache cache : protectedCaches) {
      if (cache != null && cache.getCoords() != null) {
        if (Viewport.isCacheInViewPort(mapCenterLat,mapCenterLon,mapSpanLat,mapSpanLon,cache.getCoords())) {
          count++;
        }
      }
    }
  }
  cachesCnt=count;
}
