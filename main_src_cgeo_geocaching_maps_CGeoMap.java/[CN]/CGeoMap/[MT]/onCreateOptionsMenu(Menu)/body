{
  SubMenu submenu=menu.addSubMenu(0,MENU_SELECT_MAPVIEW,0,res.getString(R.string.map_view_map)).setIcon(R.drawable.ic_menu_mapmode);
  addMapViewMenuItems(submenu);
  menu.add(0,MENU_MAP_LIVE,0,res.getString(R.string.map_live_disable)).setIcon(R.drawable.ic_menu_refresh);
  menu.add(0,MENU_STORE_CACHES,0,res.getString(R.string.caches_store_offline)).setIcon(R.drawable.ic_menu_set_as).setEnabled(false);
  SubMenu subMenuModes=menu.addSubMenu(0,SUBMENU_MODES,0,res.getString(R.string.map_modes)).setIcon(R.drawable.ic_menu_mark);
  subMenuModes.add(0,MENU_TRAIL_MODE,0,res.getString(R.string.map_trail_hide)).setIcon(R.drawable.ic_menu_trail);
  subMenuModes.add(0,MENU_CIRCLE_MODE,0,res.getString(R.string.map_circles_hide)).setIcon(R.drawable.ic_menu_circle);
  subMenuModes.add(0,MENU_THEME_MODE,0,res.getString(R.string.map_theme_select)).setIcon(R.drawable.ic_menu_preferences);
  Strategy strategy=Settings.getLiveMapStrategy();
  SubMenu subMenuStrategy=menu.addSubMenu(0,SUBMENU_STRATEGY,0,res.getString(R.string.map_strategy)).setIcon(R.drawable.ic_menu_preferences);
  subMenuStrategy.setHeaderTitle(res.getString(R.string.map_strategy_title));
  subMenuStrategy.add(MENU_GROUP_MAP_STRATEGY,MENU_STRATEGY_FASTEST,0,Strategy.FASTEST.getL10n()).setCheckable(true).setChecked(strategy == Strategy.FASTEST);
  subMenuStrategy.add(MENU_GROUP_MAP_STRATEGY,MENU_STRATEGY_FAST,0,Strategy.FAST.getL10n()).setCheckable(true).setChecked(strategy == Strategy.FAST);
  subMenuStrategy.add(MENU_GROUP_MAP_STRATEGY,MENU_STRATEGY_AUTO,0,Strategy.AUTO.getL10n()).setCheckable(true).setChecked(strategy == Strategy.AUTO);
  subMenuStrategy.add(MENU_GROUP_MAP_STRATEGY,MENU_STRATEGY_DETAILED,0,Strategy.DETAILED.getL10n()).setCheckable(true).setChecked(strategy == Strategy.DETAILED);
  subMenuStrategy.setGroupCheckable(MENU_GROUP_MAP_STRATEGY,true,true);
  menu.add(0,MENU_AS_LIST,0,res.getString(R.string.map_as_list)).setIcon(R.drawable.ic_menu_agenda);
  return true;
}
