{
  final boolean restartRequired=!MapProviderFactory.isSameActivity(MapProviderFactory.getMapSource(currentSourceId),mapSource);
  Settings.setMapSource(mapSource);
  currentSourceId=mapSource.getNumericalId();
  if (restartRequired) {
    mapRestart();
  }
 else   if (mapView != null) {
    mapView.setMapSource();
    ActivityMixin.invalidateOptionsMenu(activity);
  }
  return restartRequired;
}
