{
  try {
    stop=false;
    working=true;
    usersThreadRun=System.currentTimeMillis();
    if (stop) {
      return;
    }
    double latMin=(centerLat / 1e6) - ((spanLat / 1e6) / 2) - ((spanLat / 1e6) / 4);
    double latMax=(centerLat / 1e6) + ((spanLat / 1e6) / 2) + ((spanLat / 1e6) / 4);
    double lonMin=(centerLon / 1e6) - ((spanLon / 1e6) / 2) - ((spanLon / 1e6) / 4);
    double lonMax=(centerLon / 1e6) + ((spanLon / 1e6) / 2) + ((spanLon / 1e6) / 4);
    double llCache;
    if (latMin > latMax) {
      llCache=latMax;
      latMax=latMin;
      latMin=llCache;
    }
    if (lonMin > lonMax) {
      llCache=lonMax;
      lonMax=lonMin;
      lonMin=llCache;
    }
    users=base.getGeocachersInViewport(settings.getUsername(),latMin,latMax,lonMin,lonMax);
    if (stop) {
      return;
    }
    if (displayUsersThread != null && displayUsersThread.isWorking()) {
      displayUsersThread.stopIt();
    }
    displayUsersThread=new DisplayUsersThread(users,centerLat,centerLon,spanLat,spanLon);
    displayUsersThread.start();
  }
  finally {
    working=false;
  }
}
