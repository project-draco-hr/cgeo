{
  if (isHistory()) {
    return VisitComparator.singleton;
  }
  if (cacheComparator == null && eventsOnly) {
    return EventDateComparator.singleton;
  }
  if (cacheComparator == null) {
    return DistanceComparator.singleton;
  }
  return cacheComparator;
}
