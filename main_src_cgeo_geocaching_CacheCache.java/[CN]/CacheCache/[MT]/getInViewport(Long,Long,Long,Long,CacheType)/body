{
  final Set<String> geocodes=new HashSet<String>();
  for (  final cgCache cache : cachesCache.values()) {
    if (cache.getCoords() == null) {
      Log.e("CacheCache.getInViewport: got cache with null coordinates: " + cache.getGeocode());
      continue;
    }
    if ((CacheType.ALL == cacheType || cache.getType() == cacheType) && Viewport.isCacheInViewPort(centerLat.intValue(),centerLon.intValue(),spanLat.intValue(),spanLon.intValue(),cache.getCoords())) {
      geocodes.add(cache.getGeocode());
    }
  }
  return geocodes;
}
