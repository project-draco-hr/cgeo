{
  Preference backup=getPreference(R.string.pref_fakekey_preference_backup);
  backup.setOnPreferenceClickListener(new OnPreferenceClickListener(){
    @Override public boolean onPreferenceClick(    final Preference preference){
      final Context context=preference.getContext();
      if (cgData.getAllCachesCount() == 0) {
        ActivityMixin.helpDialog(SettingsActivity.this,context.getString(R.string.init_backup),context.getString(R.string.init_backup_unnecessary));
        return false;
      }
      final ProgressDialog dialog=ProgressDialog.show(context,context.getString(R.string.init_backup),context.getString(R.string.init_backup_running),true,false);
      new Thread(){
        @Override public void run(){
          final String backupFileName=cgData.backupDatabase();
          runOnUiThread(new Runnable(){
            @Override public void run(){
              dialog.dismiss();
              ActivityMixin.helpDialog(SettingsActivity.this,context.getString(R.string.init_backup_backup),backupFileName != null ? context.getString(R.string.init_backup_success) + "\n" + backupFileName : context.getString(R.string.init_backup_failed));
              VALUE_CHANGE_LISTENER.onPreferenceChange(SettingsActivity.this.getPreference(R.string.pref_fakekey_preference_backup_info),"");
            }
          }
);
        }
      }
.start();
      return true;
    }
  }
);
  Preference restore=getPreference(R.string.pref_fakekey_preference_restore);
  restore.setOnPreferenceClickListener(new OnPreferenceClickListener(){
    @Override public boolean onPreferenceClick(    final Preference preference){
      ((cgeoapplication)SettingsActivity.this.getApplication()).restoreDatabase(SettingsActivity.this);
      return true;
    }
  }
);
}
