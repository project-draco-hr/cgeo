{
  if (cache.isOffline()) {
    final EditNoteDialogListener editNoteDialogListener=new EditNoteDialogListener(){
      @Override public void onFinishEditNoteDialog(      final String note){
        cache.setPersonalNote(note);
        cache.parseWaypointsFromNote();
        final TextView personalNoteView=(TextView)activity.findViewById(R.id.personalnote);
        setPersonalNote(personalNoteView,note);
        DataStore.saveCache(cache,EnumSet.of(SaveFlag.DB));
        activity.notifyDataSetChanged();
      }
    }
;
    final FragmentManager fm=activity.getSupportFragmentManager();
    final EditNoteDialog dialog=EditNoteDialog.newInstance(cache.getPersonalNote(),editNoteDialogListener);
    dialog.show(fm,"fragment_edit_note");
  }
}
