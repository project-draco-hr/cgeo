{
  super(activity);
  View layout=activity.getLayoutInflater().inflate(R.layout.reset_cache_coords_dialog,null);
  setView(layout);
  resetLocal=(RadioButton)layout.findViewById(R.id.reset_cache_coordinates_local);
  resetBoth=(RadioButton)layout.findViewById(R.id.reset_cache_coordinates_local_and_remote);
  if (ConnectorFactory.getConnector(cache).supportsOwnCoordinates()) {
    resetBoth.setVisibility(View.VISIBLE);
  }
  layout.findViewById(R.id.reset).setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      dismiss();
      final ProgressDialog p=ProgressDialog.show(CacheDetailActivity.this,res.getString(R.string.cache),res.getString(R.string.waypoint_reset),true);
      final Handler h=new Handler(){
        private boolean remoteFinished=false;
        private boolean localFinished=false;
        @Override public void handleMessage(        Message msg){
          if (msg.what == ResetCoordsThread.LOCAL) {
            localFinished=true;
          }
 else {
            remoteFinished=true;
          }
          if ((localFinished) && (remoteFinished || !resetBoth.isChecked())) {
            p.dismiss();
            notifyDataSetChanged();
          }
        }
      }
;
      new ResetCoordsThread(cache,h,wpt,resetLocal.isChecked() || resetBoth.isChecked(),resetBoth.isChecked(),p).start();
    }
  }
);
}
