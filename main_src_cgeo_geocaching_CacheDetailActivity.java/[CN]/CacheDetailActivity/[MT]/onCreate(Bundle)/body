{
  super.onCreate(savedInstanceState);
  setTheme();
  setContentView(R.layout.cacheview);
  setTitle(res.getString(R.string.cache));
  if (geolocation == null) {
    geolocation=app.startGeo(this,locationUpdater,0,0);
  }
  String geocode=null;
  String guid=null;
  String name=null;
  if (search != null) {
    cache=app.getCache(search);
    if (cache != null && cache.getGeocode() != null) {
      geocode=cache.getGeocode();
    }
  }
  final Bundle extras=getIntent().getExtras();
  final Uri uri=getIntent().getData();
  if (geocode == null && extras != null) {
    geocode=extras.getString("geocode");
    name=extras.getString("name");
    guid=extras.getString("guid");
  }
  if (geocode == null && guid == null && uri != null) {
    String uriHost=uri.getHost().toLowerCase();
    String uriPath=uri.getPath().toLowerCase();
    String uriQuery=uri.getQuery();
    if (uriQuery != null) {
      Log.i(Settings.tag,"Opening URI: " + uriHost + uriPath+ "?"+ uriQuery);
    }
 else {
      Log.i(Settings.tag,"Opening URI: " + uriHost + uriPath);
    }
    if (uriHost.contains("geocaching.com")) {
      geocode=uri.getQueryParameter("wp");
      guid=uri.getQueryParameter("guid");
      if (StringUtils.isNotBlank(geocode)) {
        geocode=geocode.toUpperCase();
        guid=null;
      }
 else       if (StringUtils.isNotBlank(guid)) {
        geocode=null;
        guid=guid.toLowerCase();
      }
 else {
        showToast(res.getString(R.string.err_detail_open));
        finish();
        return;
      }
    }
 else     if (uriHost.contains("coord.info")) {
      if (uriPath != null && uriPath.startsWith("/gc")) {
        geocode=uriPath.substring(1).toUpperCase();
      }
 else {
        showToast(res.getString(R.string.err_detail_open));
        finish();
        return;
      }
    }
  }
  if (geocode == null && guid == null) {
    showToast(res.getString(R.string.err_detail_cache));
    finish();
    return;
  }
  if (StringUtils.isNotBlank(geocode)) {
    app.setAction(geocode);
  }
  final LoadCacheHandler loadCacheHandler=new LoadCacheHandler();
  try {
    String title=res.getString(R.string.cache);
    if (StringUtils.isNotBlank(name)) {
      title=name;
    }
 else     if (null != geocode && StringUtils.isNotBlank(geocode)) {
      title=geocode.toUpperCase();
    }
    progress.show(this,title,res.getString(R.string.cache_dialog_loading_details),true,loadCacheHandler.cancelMessage());
  }
 catch (  Exception e) {
  }
  ViewPager pager=(ViewPager)findViewById(R.id.viewpager);
  viewPagerIndicator=new ViewPagerIndicator();
  pager.setOnPageChangeListener(viewPagerIndicator);
  viewPagerAdapter=new ViewPagerAdapter();
  pager.setAdapter(viewPagerAdapter);
  new LoadCacheThread(geocode,guid,loadCacheHandler).start();
}
