{
  if (null != wpt.getCoords()) {
    final TextView coordinatesView=holder.coordinatesView;
    coordinatesView.setOnClickListener(new CoordinatesFormatSwitcher(wpt.getCoords()));
    coordinatesView.setText(wpt.getCoords().toString());
    coordinatesView.setVisibility(View.VISIBLE);
  }
  final String waypointInfo=Formatter.formatWaypointInfo(wpt);
  if (StringUtils.isNotBlank(waypointInfo)) {
    final TextView infoView=holder.infoView;
    infoView.setText(waypointInfo);
    infoView.setVisibility(View.VISIBLE);
  }
  final TextView nameView=holder.nameView;
  if (StringUtils.isNotBlank(wpt.getName())) {
    nameView.setText(StringEscapeUtils.unescapeHtml4(wpt.getName()));
  }
 else   if (null != wpt.getCoords()) {
    nameView.setText(wpt.getCoords().toString());
  }
 else {
    nameView.setText(res.getString(R.string.waypoint));
  }
  wpt.setIcon(res,nameView);
  if (wpt.isVisited()) {
    final TypedValue a=new TypedValue();
    getTheme().resolveAttribute(R.attr.text_color_grey,a,true);
    if (a.type >= TypedValue.TYPE_FIRST_COLOR_INT && a.type <= TypedValue.TYPE_LAST_COLOR_INT) {
      nameView.setTextColor(a.data);
    }
  }
  if (StringUtils.isNotBlank(wpt.getNote())) {
    final TextView noteView=holder.noteView;
    noteView.setVisibility(View.VISIBLE);
    if (TextUtils.containsHtml(wpt.getNote())) {
      noteView.setText(Html.fromHtml(wpt.getNote()),TextView.BufferType.SPANNABLE);
    }
 else {
      noteView.setText(wpt.getNote());
    }
  }
  final View wpNavView=holder.wpNavView;
  wpNavView.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      NavigationAppFactory.startDefaultNavigationApplication(1,CacheDetailActivity.this,wpt);
    }
  }
);
  wpNavView.setOnLongClickListener(new View.OnLongClickListener(){
    @Override public boolean onLongClick(    View v){
      NavigationAppFactory.startDefaultNavigationApplication(2,CacheDetailActivity.this,wpt);
      return true;
    }
  }
);
  registerForContextMenu(rowView);
  rowView.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      selectedWaypoint=wpt;
      openContextMenu(v);
    }
  }
);
  rowView.setOnLongClickListener(new View.OnLongClickListener(){
    @Override public boolean onLongClick(    View v){
      selectedWaypoint=wpt;
      EditWaypointActivity.startActivityEditWaypoint(CacheDetailActivity.this,cache,wpt.getId());
      refreshOnResume=true;
      return true;
    }
  }
);
}
