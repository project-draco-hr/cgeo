{
  if (StringUtils.isEmpty(data)) {
    Log.e(Settings.tag,"cgeoBase.parseMapJSON: No page given");
    return null;
  }
  final cgCacheWrap caches=new cgCacheWrap();
  caches.url=uri;
  try {
    final JSONObject yoDawg=new JSONObject(data);
    final String json=yoDawg.getString("d");
    if (StringUtils.isBlank(json)) {
      Log.e(Settings.tag,"cgeoBase.parseMapJSON: No JSON inside JSON");
      return null;
    }
    final JSONObject dataJSON=new JSONObject(json);
    final JSONObject extra=dataJSON.getJSONObject("cs");
    if (extra != null && extra.length() > 0) {
      int count=extra.getInt("count");
      if (count > 0 && extra.has("cc")) {
        final JSONArray cachesData=extra.getJSONArray("cc");
        if (cachesData != null && cachesData.length() > 0) {
          JSONObject oneCache=null;
          for (int i=0; i < count; i++) {
            oneCache=cachesData.getJSONObject(i);
            if (oneCache == null) {
              break;
            }
            final cgCache cacheToAdd=new cgCache();
            cacheToAdd.setReliableLatLon(false);
            cacheToAdd.setGeocode(oneCache.getString("gc"));
            cacheToAdd.setCoords(new Geopoint(oneCache.getDouble("lat"),oneCache.getDouble("lon")));
            cacheToAdd.setName(oneCache.getString("nn"));
            cacheToAdd.setFound(oneCache.getBoolean("f"));
            cacheToAdd.setOwn(oneCache.getBoolean("o"));
            cacheToAdd.setDisabled(!oneCache.getBoolean("ia"));
            int ctid=oneCache.getInt("ctid");
            if (ctid == 2) {
              cacheToAdd.setType(CacheType.TRADITIONAL);
            }
 else             if (ctid == 3) {
              cacheToAdd.setType(CacheType.MULTI);
            }
 else             if (ctid == 4) {
              cacheToAdd.setType(CacheType.VIRTUAL);
            }
 else             if (ctid == 5) {
              cacheToAdd.setType(CacheType.LETTERBOX);
            }
 else             if (ctid == 6) {
              cacheToAdd.setType(CacheType.EVENT);
            }
 else             if (ctid == 8) {
              cacheToAdd.setType(CacheType.MYSTERY);
            }
 else             if (ctid == 11) {
              cacheToAdd.setType(CacheType.WEBCAM);
            }
 else             if (ctid == 13) {
              cacheToAdd.setType(CacheType.CITO);
            }
 else             if (ctid == 137) {
              cacheToAdd.setType(CacheType.EARTH);
            }
 else             if (ctid == 453) {
              cacheToAdd.setType(CacheType.MEGA_EVENT);
            }
 else             if (ctid == 1858) {
              cacheToAdd.setType(CacheType.WHERIGO);
            }
 else             if (ctid == 3653) {
              cacheToAdd.setType(CacheType.LOSTANDFOUND);
            }
 else {
              cacheToAdd.setType(CacheType.UNKNOWN);
            }
            caches.cacheList.add(cacheToAdd);
          }
        }
      }
 else {
        Log.w(Settings.tag,"There are no caches in viewport");
      }
      caches.totalCnt=caches.cacheList.size();
    }
  }
 catch (  Exception e) {
    Log.e(Settings.tag,"cgBase.parseMapJSON",e);
  }
  return caches;
}
