{
  if (StringUtils.isEmpty(data)) {
    Log.e(Settings.tag,"cgeoBase.parseMapJSON: No page given");
    return null;
  }
  final cgCacheWrap caches=new cgCacheWrap();
  caches.url=uri;
  try {
    final JSONObject yoDawg=new JSONObject(data);
    final String json=yoDawg.getString("d");
    if (StringUtils.isBlank(json)) {
      Log.e(Settings.tag,"cgeoBase.parseMapJSON: No JSON inside JSON");
      return null;
    }
    final JSONObject dataJSON=new JSONObject(json);
    final JSONObject extra=dataJSON.getJSONObject("cs");
    if (extra != null && extra.length() > 0) {
      int count=extra.getInt("count");
      if (count > 0 && extra.has("cc")) {
        final JSONArray cachesData=extra.getJSONArray("cc");
        if (cachesData != null && cachesData.length() > 0) {
          JSONObject oneCache=null;
          for (int i=0; i < count; i++) {
            oneCache=cachesData.getJSONObject(i);
            if (oneCache == null) {
              break;
            }
            final cgCache cacheToAdd=new cgCache();
            cacheToAdd.reliableLatLon=false;
            cacheToAdd.geocode=oneCache.getString("gc");
            cacheToAdd.coords=new Geopoint(oneCache.getDouble("lat"),oneCache.getDouble("lon"));
            cacheToAdd.name=oneCache.getString("nn");
            cacheToAdd.found=oneCache.getBoolean("f");
            cacheToAdd.own=oneCache.getBoolean("o");
            cacheToAdd.disabled=!oneCache.getBoolean("ia");
            int ctid=oneCache.getInt("ctid");
            if (ctid == 2) {
              cacheToAdd.type=CacheType.TRADITIONAL.id;
            }
 else             if (ctid == 3) {
              cacheToAdd.type=CacheType.MULTI.id;
            }
 else             if (ctid == 4) {
              cacheToAdd.type=CacheType.VIRTUAL.id;
            }
 else             if (ctid == 5) {
              cacheToAdd.type=CacheType.LETTERBOX.id;
            }
 else             if (ctid == 6) {
              cacheToAdd.type=CacheType.EVENT.id;
            }
 else             if (ctid == 8) {
              cacheToAdd.type=CacheType.MYSTERY.id;
            }
 else             if (ctid == 11) {
              cacheToAdd.type=CacheType.WEBCAM.id;
            }
 else             if (ctid == 13) {
              cacheToAdd.type=CacheType.CITO.id;
            }
 else             if (ctid == 137) {
              cacheToAdd.type=CacheType.EARTH.id;
            }
 else             if (ctid == 453) {
              cacheToAdd.type=CacheType.MEGA_EVENT.id;
            }
 else             if (ctid == 1858) {
              cacheToAdd.type=CacheType.WHERIGO.id;
            }
 else             if (ctid == 3653) {
              cacheToAdd.type=CacheType.LOSTANDFOUND.id;
            }
 else {
              cacheToAdd.type=CacheType.UNKNOWN.id;
            }
            caches.cacheList.add(cacheToAdd);
          }
        }
      }
 else {
        Log.w(Settings.tag,"There are no caches in viewport");
      }
      caches.totalCnt=caches.cacheList.size();
    }
  }
 catch (  Exception e) {
    Log.e(Settings.tag,"cgBase.parseMapJSON",e);
  }
  return caches;
}
