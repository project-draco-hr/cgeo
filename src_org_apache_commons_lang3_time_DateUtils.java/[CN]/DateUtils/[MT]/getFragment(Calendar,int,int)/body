{
  if (calendar == null) {
    throw new IllegalArgumentException("The date must not be null");
  }
  long millisPerUnit=getMillisPerUnit(unit);
  long result=0;
switch (fragment) {
case Calendar.YEAR:
    result+=(calendar.get(Calendar.DAY_OF_YEAR) * MILLIS_PER_DAY) / millisPerUnit;
  break;
case Calendar.MONTH:
result+=(calendar.get(Calendar.DAY_OF_MONTH) * MILLIS_PER_DAY) / millisPerUnit;
break;
}
switch (fragment) {
case Calendar.YEAR:
case Calendar.MONTH:
case Calendar.DAY_OF_YEAR:
case Calendar.DATE:
result+=(calendar.get(Calendar.HOUR_OF_DAY) * MILLIS_PER_HOUR) / millisPerUnit;
case Calendar.HOUR_OF_DAY:
result+=(calendar.get(Calendar.MINUTE) * MILLIS_PER_MINUTE) / millisPerUnit;
case Calendar.MINUTE:
result+=(calendar.get(Calendar.SECOND) * MILLIS_PER_SECOND) / millisPerUnit;
case Calendar.SECOND:
result+=(calendar.get(Calendar.MILLISECOND) * 1) / millisPerUnit;
break;
case Calendar.MILLISECOND:
break;
default :
throw new IllegalArgumentException("The fragment " + fragment + " is not supported");
}
return result;
}
