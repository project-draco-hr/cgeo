{
  final File gc31j2h=new File(tempDir,"gc31j2h.gpx");
  copyResourceToFile(R.raw.gc31j2h,gc31j2h);
  copyResourceToFile(R.raw.gc31j2h_wpts,new File(tempDir,"gc31j2h-wpts.gpx"));
  final GPXImporter.ImportGpxFileThread importThread=new GPXImporter.ImportGpxFileThread(gc31j2h,listId,importStepHandler,progressHandler);
  runImportThread(importThread);
  assertImportStepMessages(GPXImporter.IMPORT_STEP_START,GPXImporter.IMPORT_STEP_READ_FILE,GPXImporter.IMPORT_STEP_READ_WPT_FILE,GPXImporter.IMPORT_STEP_STORE_STATIC_MAPS,GPXImporter.IMPORT_STEP_FINISHED);
  final SearchResult search=(SearchResult)importStepHandler.messages.get(4).obj;
  assertThat(new ArrayList<String>(search.getGeocodes())).isEqualTo(Collections.singletonList("GC31J2H"));
  final Geocache cache=DataStore.loadCache("GC31J2H",LoadFlags.LOAD_CACHE_OR_DB);
  assert(cache != null);
  assertThat(cache).isNotNull();
  assertCacheProperties(cache);
  assertThat(cache.getWaypoints()).hasSize(2);
}
