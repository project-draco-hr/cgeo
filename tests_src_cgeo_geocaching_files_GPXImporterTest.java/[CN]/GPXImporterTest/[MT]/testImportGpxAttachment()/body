{
  Uri uri=Uri.parse("android.resource://cgeo.geocaching.test/raw/gc31j2h");
  GPXImporter.ImportGpxAttachmentThread importThread=new GPXImporter.ImportGpxAttachmentThread(uri,getInstrumentation().getContext().getContentResolver(),listId,importStepHandler,progressHandler);
  runImportThread(importThread);
  assertEquals(3,importStepHandler.messages.size());
  assertEquals(GPXImporter.IMPORT_STEP_READ_FILE,importStepHandler.messages.get(0).what);
  assertEquals(GPXImporter.IMPORT_STEP_STORE_CACHES,importStepHandler.messages.get(1).what);
  assertEquals(GPXImporter.IMPORT_STEP_FINISHED,importStepHandler.messages.get(2).what);
  cgSearch search=(cgSearch)importStepHandler.messages.get(2).obj;
  assertEquals(Collections.singletonList("GC31J2H"),search.getGeocodes());
  cgCache cache=cgeoapplication.getInstance().getCacheByGeocode("GC31J2H");
  assertCacheProperties(cache);
}
