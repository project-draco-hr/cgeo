{
  final String geocode="GC31J2H";
  removeCacheCompletely(geocode);
  final Uri uri=Uri.parse("android.resource://cgeo.geocaching.test/raw/pq7545915");
  final GPXImporter.ImportGpxZipAttachmentThread importThread=new GPXImporter.ImportGpxZipAttachmentThread(uri,getInstrumentation().getContext().getContentResolver(),listId,importStepHandler,progressHandler);
  runImportThread(importThread);
  assertImportStepMessages(GPXImporter.IMPORT_STEP_START,GPXImporter.IMPORT_STEP_READ_FILE,GPXImporter.IMPORT_STEP_READ_WPT_FILE,GPXImporter.IMPORT_STEP_STORE_STATIC_MAPS,GPXImporter.IMPORT_STEP_FINISHED);
  final SearchResult search=(SearchResult)importStepHandler.messages.get(4).obj;
  assertThat(new ArrayList<String>(search.getGeocodes())).isEqualTo(Collections.singletonList(geocode));
  final Geocache cache=DataStore.loadCache(geocode,LoadFlags.LOAD_CACHE_OR_DB);
  assertCacheProperties(cache);
  assertThat(cache.getWaypoints()).hasSize(1);
}
