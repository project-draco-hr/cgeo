{
  ArrayList<File> list=new ArrayList<File>();
  try {
    if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED) == true) {
      final File gpx=new File(Environment.getExternalStorageDirectory().toString() + "/gpx");
      if (gpx.exists() && gpx.isDirectory()) {
        listDir(list,gpx);
      }
 else {
        listDir(list,Environment.getExternalStorageDirectory());
      }
    }
 else {
      Log.w(cgSettings.tag,"No external media mounted.");
    }
  }
 catch (  Exception e) {
    Log.e(cgSettings.tag,"cgeogpxes.loadFiles.run: " + e.toString());
  }
  final Message msg=new Message();
  msg.obj="loaded directories";
  changeWaitDialogHandler.sendMessage(msg);
  files.addAll(list);
  list.clear();
  loadFilesHandler.sendMessage(new Message());
}
