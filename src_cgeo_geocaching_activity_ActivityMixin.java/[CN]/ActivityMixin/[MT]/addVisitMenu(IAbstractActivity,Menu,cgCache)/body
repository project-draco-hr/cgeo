{
  if (cache == null) {
    return;
  }
  if (!cache.supportsLogging()) {
    return;
  }
  cgSettings settings=activity.getSettings();
  Resources res=((Activity)activity).getResources();
  if (settings.isLogin()) {
    if (settings.getLogOffline()) {
      SubMenu logMenu=menu.addSubMenu(1,IAbstractActivity.MENU_LOG_VISIT_OFFLINE,0,res.getString(R.string.cache_menu_visit_offline)).setIcon(MENU_ICON_LOG_VISIT);
      List<Integer> logTypes=cache.getPossibleLogTypes(settings);
      for (      Integer logType : logTypes) {
        String label=cgBase.logTypes2.get(logType);
        logMenu.add(1,IAbstractActivity.MENU_LOG_VISIT_OFFLINE + logType,0,label);
      }
      logMenu.add(1,IAbstractActivity.MENU_LOG_VISIT,0,res.getString(R.string.cache_menu_visit));
    }
 else {
      menu.add(1,IAbstractActivity.MENU_LOG_VISIT,0,res.getString(R.string.cache_menu_visit)).setIcon(MENU_ICON_LOG_VISIT);
    }
  }
}
