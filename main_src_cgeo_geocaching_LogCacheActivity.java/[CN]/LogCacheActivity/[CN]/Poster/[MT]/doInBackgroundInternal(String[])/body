{
  final String log=logTexts[0];
  final String logPwd=logTexts.length > 1 ? logTexts[1] : null;
  try {
    final LogResult logResult=loggingManager.postLog(typeSelected,date,log,logPwd,new ArrayList<>(trackables));
    if (logResult.getPostLogResult() == StatusCode.NO_ERROR) {
      if (typeSelected.isFoundLog()) {
        cache.setFound(true);
        cache.setVisitedDate(date.getTimeInMillis());
      }
      DataStore.saveChangedCache(cache);
      final ArrayList<LogEntry> newLogs=new ArrayList<>(cache.getLogs());
      final LogEntry logNow=new LogEntry(date.getTimeInMillis(),typeSelected,log);
      logNow.friend=true;
      newLogs.add(0,logNow);
      DataStore.saveLogs(cache.getGeocode(),newLogs);
      cache.clearOfflineLog();
      if (typeSelected == LogType.FOUND_IT) {
        if (tweetCheck.isChecked() && tweetBox.getVisibility() == View.VISIBLE) {
          Twitter.postTweetCache(geocode,logNow);
        }
      }
      if (GCVote.isValidRating(rating) && GCVote.isVotingPossible(cache)) {
        if (GCVote.setRating(cache,rating)) {
          cache.setMyVote(rating);
          DataStore.saveChangedCache(cache);
        }
 else {
          showToast(res.getString(R.string.err_gcvote_send_rating));
        }
      }
      for (      final TrackableConnector connector : trackablesConnectors) {
        final TrackableLoggingManager manager=connector.getTrackableLoggingManager();
        for (        final TrackableLog trackableLog : trackables) {
          manager.postLog(cache,trackableLog,date,log);
        }
      }
      if (StringUtils.isNotBlank(imageUri.getPath())) {
        final ImageResult imageResult=loggingManager.postLogImage(logResult.getLogId(),imageCaption,imageDescription,imageUri);
        final String uploadedImageUrl=imageResult.getImageUri();
        if (StringUtils.isNotEmpty(uploadedImageUrl)) {
          logNow.addLogImage(new Image(uploadedImageUrl,imageCaption,imageDescription));
          DataStore.saveLogs(cache.getGeocode(),newLogs);
        }
        return imageResult.getPostResult();
      }
    }
    return logResult.getPostLogResult();
  }
 catch (  final RuntimeException e) {
    Log.e("LogCacheActivity.Poster.doInBackgroundInternal",e);
  }
  return StatusCode.LOG_POST_ERROR;
}
