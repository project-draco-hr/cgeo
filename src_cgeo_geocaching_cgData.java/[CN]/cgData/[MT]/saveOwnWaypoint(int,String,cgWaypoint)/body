{
  init();
  if ((StringUtils.isBlank(geocode) && id <= 0) || waypoint == null) {
    return false;
  }
  boolean ok=false;
  databaseRW.beginTransaction();
  try {
    ContentValues values=new ContentValues();
    values.put("geocode",geocode);
    values.put("updated",System.currentTimeMillis());
    values.put("type",waypoint.type);
    values.put("prefix",waypoint.prefix);
    values.put("lookup",waypoint.lookup);
    values.put("name",waypoint.name);
    values.put("latlon",waypoint.latlon);
    values.put("latitude_string",waypoint.latitudeString);
    values.put("longitude_string",waypoint.longitudeString);
    values.put("latitude",waypoint.latitude);
    values.put("longitude",waypoint.longitude);
    values.put("note",waypoint.note);
    if (id <= 0) {
      databaseRW.insert(dbTableWaypoints,null,values);
      ok=true;
    }
 else {
      final int rows=databaseRW.update(dbTableWaypoints,values,"_id = " + id,null);
      if (rows > 0) {
        ok=true;
      }
 else {
        ok=false;
      }
    }
    databaseRW.setTransactionSuccessful();
  }
  finally {
    databaseRW.endTransaction();
  }
  return ok;
}
