{
  final float azimuthTemp=azimuthShown;
  final float azimuthRelative=AngleUtils.normalize(azimuthTemp - cacheHeadingShown);
  final int canvasCenterX=(compassRoseWidth / 2) + ((getWidth() - compassRoseWidth) / 2);
  final int canvasCenterY=(compassRoseHeight / 2) + ((getHeight() - compassRoseHeight) / 2);
  super.onDraw(canvas);
  canvas.save();
  canvas.setDrawFilter(setfil);
  int marginLeftTemp=(getWidth() - compassUnderlayWidth) / 2;
  int marginTopTemp=(getHeight() - compassUnderlayHeight) / 2;
  canvas.drawBitmap(compassUnderlay,marginLeftTemp,marginTopTemp,null);
  marginLeftTemp=(getWidth() - compassRoseWidth) / 2;
  marginTopTemp=(getHeight() - compassRoseHeight) / 2;
  canvas.save();
  canvas.rotate(-azimuthTemp,canvasCenterX,canvasCenterY);
  canvas.drawBitmap(compassRose,marginLeftTemp,marginTopTemp,null);
  canvas.restore();
  marginLeftTemp=(getWidth() - compassArrowWidth) / 2;
  marginTopTemp=(getHeight() - compassArrowHeight) / 2;
  canvas.save();
  canvas.rotate(-azimuthRelative,canvasCenterX,canvasCenterY);
  canvas.drawBitmap(compassArrow,marginLeftTemp,marginTopTemp,null);
  canvas.restore();
  marginLeftTemp=(getWidth() - compassOverlayWidth) / 2;
  marginTopTemp=(getHeight() - compassOverlayHeight) / 2;
  canvas.drawBitmap(compassOverlay,marginLeftTemp,marginTopTemp,null);
  canvas.setDrawFilter(remfil);
  canvas.restore();
}
