{
  try {
    if (items.size() <= index) {
      return false;
    }
    progress.show(context,context.getResources().getString(R.string.map_live),context.getResources().getString(R.string.cache_dialog_loading_details),true,null);
    CachesOverlayItemImpl item=null;
    getOverlayImpl().lock();
    try {
      if (index < items.size()) {
        item=items.get(index);
      }
    }
  finally {
      getOverlayImpl().unlock();
    }
    if (item == null) {
      return false;
    }
    final IWaypoint coordinate=item.getCoord();
    if (StringUtils.isNotBlank(coordinate.getCoordType()) && coordinate.getCoordType().equalsIgnoreCase("cache") && StringUtils.isNotBlank(coordinate.getGeocode())) {
      Geocache cache=cgData.loadCache(coordinate.getGeocode(),LoadFlags.LOAD_CACHE_OR_DB);
      RequestDetailsThread requestDetailsThread=new RequestDetailsThread(cache);
      if (!requestDetailsThread.requestRequired()) {
        progress.dismiss();
      }
      requestDetailsThread.start();
      return true;
    }
    if (coordinate.getCoordType() != null && coordinate.getCoordType().equalsIgnoreCase("waypoint") && coordinate.getId() >= 0) {
      CGeoMap.markCacheAsDirty(coordinate.getGeocode());
      WaypointPopup.startActivity(context,coordinate.getId(),coordinate.getGeocode());
    }
 else {
      progress.dismiss();
      return false;
    }
    progress.dismiss();
  }
 catch (  NotFoundException e) {
    Log.e("CachesOverlay.onTap",e);
    if (progress != null) {
      progress.dismiss();
    }
  }
  return true;
}
