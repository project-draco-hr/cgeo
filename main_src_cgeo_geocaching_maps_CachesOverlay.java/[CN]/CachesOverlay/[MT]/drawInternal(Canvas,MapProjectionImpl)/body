{
  getOverlayImpl().lock();
  try {
    if (displayCircles) {
      if (blockedCircle == null) {
        blockedCircle=new Paint();
        blockedCircle.setAntiAlias(true);
        blockedCircle.setStrokeWidth(2.0f);
        blockedCircle.setARGB(127,0,0,0);
        blockedCircle.setPathEffect(new DashPathEffect(new float[]{3,2},0));
      }
      if (setfil == null) {
        setfil=new PaintFlagsDrawFilter(0,Paint.FILTER_BITMAP_FLAG);
      }
      if (remfil == null) {
        remfil=new PaintFlagsDrawFilter(Paint.FILTER_BITMAP_FLAG,0);
      }
      canvas.setDrawFilter(setfil);
      for (      CachesOverlayItemImpl item : items) {
        final IWaypoint itemCoord=item.getCoord();
        float[] result=new float[1];
        Location.distanceBetween(itemCoord.getCoords().getLatitude(),itemCoord.getCoords().getLongitude(),itemCoord.getCoords().getLatitude(),itemCoord.getCoords().getLongitude() + 1,result);
        final float longitudeLineDistance=result[0];
        GeoPointImpl itemGeo=mapProvider.getGeoPointBase(itemCoord.getCoords());
        final Geopoint leftCoords=new Geopoint(itemCoord.getCoords().getLatitude(),itemCoord.getCoords().getLongitude() - 161 / longitudeLineDistance);
        GeoPointImpl leftGeo=mapProvider.getGeoPointBase(leftCoords);
        projection.toPixels(itemGeo,center);
        projection.toPixels(leftGeo,left);
        int radius=center.x - left.x;
        final CacheType type=item.getType();
        if (type == null || type == CacheType.MULTI || type == CacheType.MYSTERY || type == CacheType.VIRTUAL) {
          blockedCircle.setColor(0x66000000);
          blockedCircle.setStyle(Style.STROKE);
          canvas.drawCircle(center.x,center.y,radius,blockedCircle);
        }
 else {
          blockedCircle.setColor(0x66BB0000);
          blockedCircle.setStyle(Style.STROKE);
          canvas.drawCircle(center.x,center.y,radius,blockedCircle);
          blockedCircle.setColor(0x44BB0000);
          blockedCircle.setStyle(Style.FILL);
          canvas.drawCircle(center.x,center.y,radius,blockedCircle);
        }
      }
      canvas.setDrawFilter(remfil);
    }
  }
  finally {
    getOverlayImpl().unlock();
  }
}
