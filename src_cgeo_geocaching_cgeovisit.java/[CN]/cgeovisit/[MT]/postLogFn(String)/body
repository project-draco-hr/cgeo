{
  int status=-1;
  try {
    if (tweetBox == null) {
      tweetBox=(LinearLayout)findViewById(R.id.tweet_box);
    }
    if (tweetCheck == null) {
      tweetCheck=(CheckBox)findViewById(R.id.tweet);
    }
    status=base.postLog(app,geocode,cacheid,viewstate,viewstate1,typeSelected,date.get(Calendar.YEAR),(date.get(Calendar.MONTH) + 1),date.get(Calendar.DATE),log,trackables);
    if (status == 1) {
      cgLog logNow=new cgLog();
      logNow.author=settings.getUsername();
      logNow.date=date.getTimeInMillis();
      logNow.type=typeSelected;
      logNow.log=log;
      cache.logs.add(0,logNow);
      app.addLog(geocode,logNow);
      if (typeSelected == cgBase.LOG_FOUND_IT) {
        app.markFound(geocode);
        if (cache != null) {
          cache.found=true;
        }
      }
      if (cache != null) {
        app.putCacheInCache(cache);
      }
 else {
        app.removeCacheFromCache(geocode);
      }
    }
    if (status == 1) {
      app.clearLogOffline(geocode);
    }
    if (status == 1 && typeSelected == cgBase.LOG_FOUND_IT && settings.twitter == 1 && settings.tokenPublic != null && settings.tokenPublic.length() > 0 && settings.tokenSecret != null && settings.tokenSecret.length() > 0 && tweetCheck.isChecked() == true && tweetBox.getVisibility() == View.VISIBLE) {
      base.postTweetCache(app,settings,geocode);
    }
    if (status == 1 && typeSelected == cgBase.LOG_FOUND_IT && settings.isGCvoteLogin() == true) {
      setRating(cache.guid,rating);
    }
    return status;
  }
 catch (  Exception e) {
    Log.e(cgSettings.tag,"cgeovisit.postLogFn: " + e.toString());
  }
  return 1000;
}
