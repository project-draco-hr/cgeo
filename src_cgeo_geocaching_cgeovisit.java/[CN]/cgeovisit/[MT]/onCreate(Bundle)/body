{
  super.onCreate(savedInstanceState);
  setTheme();
  setContentView(R.layout.visit);
  setTitle(res.getString(R.string.log_new_log));
  Bundle extras=getIntent().getExtras();
  if (extras != null) {
    cacheid=extras.getString(EXTRAS_ID);
    geocode=extras.getString(EXTRAS_GEOCODE);
    text=extras.getString(EXTRAS_TEXT);
    alreadyFound=extras.getBoolean(EXTRAS_FOUND);
  }
  if ((cacheid == null || cacheid.length() == 0) && geocode != null && geocode.length() > 0) {
    cacheid=app.getCacheid(geocode);
  }
  if ((geocode == null || geocode.length() == 0) && cacheid != null && cacheid.length() > 0) {
    geocode=app.getGeocode(cacheid);
  }
  cache=app.getCacheByGeocode(geocode);
  if (cache.name != null && cache.name.length() > 0) {
    setTitle(res.getString(R.string.log_new_log) + " " + cache.name);
  }
 else {
    setTitle(res.getString(R.string.log_new_log) + " " + cache.geocode.toUpperCase());
  }
  app.setAction(geocode);
  if (cache == null) {
    showToast(res.getString(R.string.err_detail_cache_forgot_visit));
    finish();
    return;
  }
  init();
}
