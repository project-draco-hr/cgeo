{
  BitmapFactory.Options sizeOnlyOptions=new BitmapFactory.Options();
  sizeOnlyOptions.inJustDecodeBounds=true;
  BitmapFactory.decodeFile(filePath,sizeOnlyOptions);
  final int myMaxXY=Math.max(sizeOnlyOptions.outHeight,sizeOnlyOptions.outWidth);
  final int maxXY=Math.max(maxX,maxY);
  final int sampleSize=myMaxXY / maxXY;
  if (sampleSize > 1) {
    BitmapFactory.Options sampleOptions=new BitmapFactory.Options();
    sampleOptions.inSampleSize=sampleSize;
    return BitmapFactory.decodeFile(filePath,sampleOptions);
  }
  return BitmapFactory.decodeFile(filePath);
}
