{
  final String GEOCODE_CACHE="TEST";
  final String upperCase=GEOCODE_CACHE;
  final String lowerCase=StringUtils.lowerCase(upperCase);
  assertFalse(upperCase.equals(lowerCase));
  final Geocache cache=new Geocache();
  cache.setGeocode(upperCase);
  cache.setDetailed(true);
  try {
    final Geocache oldCache=cgData.loadCache(upperCase,LoadFlags.LOAD_ALL_DB_ONLY);
    assertNull("Database contained old cache!",oldCache);
    cgData.saveCache(cache,EnumSet.of(SaveFlag.SAVE_DB));
    final Geocache cacheWithOriginalCode=cgData.loadCache(upperCase,LoadFlags.LOAD_ALL_DB_ONLY);
    assertNotNull("Cache was not saved correctly!",cacheWithOriginalCode);
    final Geocache cacheLowerCase=cgData.loadCache(lowerCase,LoadFlags.LOAD_ALL_DB_ONLY);
    assertNotNull("Could not find cache by case insensitive geocode",cacheLowerCase);
  }
  finally {
    cgData.removeCache(upperCase,LoadFlags.REMOVE_ALL);
  }
}
