{
  super.onCreate(savedInstanceState);
  final Bundle extras=getIntent().getExtras();
  currentDir=dirContaining(extras.getString(Intents.EXTRA_START_DIR));
  chooseForWriting=extras.getBoolean(SimpleDirChooser.EXTRA_CHOOSE_FOR_WRITING,false);
  ActivityMixin.setTheme(this);
  setContentView(R.layout.simple_dir_chooser);
  fill(currentDir);
  okButton=(Button)findViewById(R.id.simple_dir_chooser_ok);
  okButton.setEnabled(false);
  okButton.setVisibility(View.INVISIBLE);
  okButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      setResult(RESULT_OK,new Intent().setData(Uri.fromFile(new File(currentDir,adapter.getItem(lastPosition).getName()))));
      finish();
    }
  }
);
  Button cancelButton=(Button)findViewById(R.id.simple_dir_chooser_cancel);
  cancelButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Intent intent=new Intent();
      setResult(RESULT_CANCELED,intent);
      finish();
    }
  }
);
}
