{
  final int titleId=(adapter.getCheckedCount() > 0) ? R.string.caches_remove_selected : R.string.caches_remove_all;
  final int count=adapter.getCheckedOrAllCount();
  final String message=res.getQuantityString(adapter.getCheckedCount() > 0 ? R.plurals.caches_remove_selected_confirm : R.plurals.caches_remove_all_confirm,count,count);
  Dialogs.confirmYesNo(this,titleId,message,new DialogInterface.OnClickListener(){
    @Override public void onClick(    final DialogInterface dialog,    final int id){
      final List<Geocache> selected=adapter.getCheckedOrAllCaches();
      final int lastListPosition=getListView().getFirstVisiblePosition();
      new DropDetailsTask(lastListPosition).execute(selected.toArray(new Geocache[selected.size()]));
      dialog.cancel();
    }
  }
);
}
