{
  super.onCreate(savedInstanceState);
  setTheme();
  setContentView(R.layout.cacheslist_activity);
  Bundle extras=getIntent().getExtras();
  if (extras != null) {
    final Object typeObject=extras.get(Intents.EXTRA_LIST_TYPE);
    type=(typeObject instanceof CacheListType) ? (CacheListType)typeObject : CacheListType.OFFLINE;
    coords=extras.getParcelable(Intents.EXTRA_COORDS);
  }
 else {
    extras=new Bundle();
  }
  if (isInvokedFromAttachment()) {
    type=CacheListType.OFFLINE;
    if (coords == null) {
      coords=new Geopoint(0.0,0.0);
    }
  }
  final View titleBar=findViewById(R.id.actionbar_title);
  titleBar.setClickable(true);
  titleBar.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      selectList();
    }
  }
);
  setTitle(title);
  setAdapter();
  prepareFilterBar();
  currentLoader=(AbstractSearchLoader)getSupportLoaderManager().initLoader(type.ordinal(),extras,this);
  if (CollectionUtils.isNotEmpty(cacheList)) {
    if (currentLoader != null && currentLoader.isStarted()) {
      showFooterLoadingCaches();
    }
 else {
      showFooterMoreCaches();
    }
  }
  if (isInvokedFromAttachment()) {
    importGpxAttachement();
  }
}
