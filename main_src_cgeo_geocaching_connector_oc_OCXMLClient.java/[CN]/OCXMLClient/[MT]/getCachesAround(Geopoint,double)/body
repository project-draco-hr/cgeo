{
  try {
    final Parameters params=getOCXmlQueryParameters(false,false,false);
    params.put("lat",GeopointFormatter.format(GeopointFormatter.Format.LAT_DECDEGREE_RAW,center));
    params.put("lon",GeopointFormatter.format(GeopointFormatter.Format.LON_DECDEGREE_RAW,center));
    params.put("distance",String.format(Locale.US,"%f",distance));
    final InputStream data=request(ConnectorFactory.getConnector("OCXXX"),SERVICE_CACHE,params);
    if (data == null) {
      return Collections.emptyList();
    }
    final BufferedInputStream stream=new BufferedInputStream(new GZIPInputStream(data));
    final Collection<Geocache> result=OC11XMLParser.parseCachesFiltered(stream);
    IOUtils.closeQuietly(stream);
    return result;
  }
 catch (  IOException e) {
    Log.e("Error parsing nearby search result",e);
    return Collections.emptyList();
  }
}
