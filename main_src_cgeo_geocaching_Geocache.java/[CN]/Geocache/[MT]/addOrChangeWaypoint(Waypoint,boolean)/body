{
  waypoint.setGeocode(geocode);
  if (waypoint.getId() < 0) {
    waypoints.add(waypoint);
    if (waypoint.isFinalWithCoords()) {
      finalDefined=true;
    }
  }
 else {
    final int index=getWaypointIndex(waypoint);
    if (index >= 0) {
      waypoints.remove(index);
    }
    waypoints.add(waypoint);
    resetFinalDefined();
  }
  return saveToDatabase && cgData.saveWaypoint(waypoint.getId(),geocode,waypoint);
}
