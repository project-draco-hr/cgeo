{
  try {
    if (StringUtils.isBlank(getPersonalNote())) {
      return;
    }
    final Pattern coordPattern=Pattern.compile("\\b[nNsS]{1}\\s*\\d");
    int count=1;
    String note=getPersonalNote();
    MatcherWrapper matcher=new MatcherWrapper(coordPattern,note);
    while (matcher.find()) {
      try {
        final Geopoint point=new Geopoint(note.substring(matcher.start()));
        if (point.getLatitudeE6() != 0 && point.getLongitudeE6() != 0 && ((point.getLatitudeE6() % 1000) != 0 || (point.getLongitudeE6() % 1000) != 0) && !hasIdenticalWaypoint(point)) {
          final String name=CgeoApplication.getInstance().getString(R.string.cache_personal_note) + " " + count;
          final String potentialWaypointType=note.substring(Math.max(0,matcher.start() - 15));
          final Waypoint waypoint=new Waypoint(name,parseWaypointType(potentialWaypointType),false);
          waypoint.setCoords(point);
          addOrChangeWaypoint(waypoint,false);
          count++;
        }
      }
 catch (      final Geopoint.ParseException e) {
      }
      note=note.substring(matcher.start() + 1);
      matcher=new MatcherWrapper(coordPattern,note);
    }
  }
 catch (  final Exception e) {
    Log.e("Geocache.parseWaypointsFromNote",e);
  }
}
