{
  if (gp == null) {
    return;
  }
  double lat=0.0;
  if (gp.getLatitude() < 0) {
    bLat.setText("S");
  }
 else {
    bLat.setText("N");
  }
  lat=Math.abs(gp.getLatitude());
  double lon=0.0;
  if (gp.getLongitude() < 0) {
    bLon.setText("W");
  }
 else {
    bLon.setText("E");
  }
  lon=Math.abs(gp.getLongitude());
  final int latDeg=(int)Math.floor(lat);
  final int latDegFrac=(int)Math.round((lat - latDeg) * 100000);
  final int latMin=(int)Math.floor((lat - latDeg) * 60);
  final int latMinFrac=(int)Math.round(((lat - latDeg) * 60 - latMin) * 1000);
  final int latSec=(int)Math.floor(((lat - latDeg) * 60 - latMin) * 60);
  final int latSecFrac=(int)Math.round((((lat - latDeg) * 60 - latMin) * 60 - latSec) * 1000);
  final int lonDeg=(int)Math.floor(lon);
  final int lonDegFrac=(int)Math.round((lon - lonDeg) * 100000);
  final int lonMin=(int)Math.floor((lon - lonDeg) * 60);
  final int lonMinFrac=(int)Math.round(((lon - lonDeg) * 60 - lonMin) * 1000);
  final int lonSec=(int)Math.floor(((lon - lonDeg) * 60 - lonMin) * 60);
  final int lonSecFrac=(int)Math.round((((lon - lonDeg) * 60 - lonMin) * 60 - lonSec) * 1000);
switch (currentFormat) {
case Plain:
    findViewById(R.id.coordTable).setVisibility(View.GONE);
  eLat.setVisibility(View.VISIBLE);
eLon.setVisibility(View.VISIBLE);
eLat.setText(gp.format(GeopointFormatter.Format.LAT_DECMINUTE));
eLon.setText(gp.format(GeopointFormatter.Format.LON_DECMINUTE));
break;
case Deg:
findViewById(R.id.coordTable).setVisibility(View.VISIBLE);
eLat.setVisibility(View.GONE);
eLon.setVisibility(View.GONE);
eLatSec.setVisibility(View.GONE);
eLonSec.setVisibility(View.GONE);
tLatSep3.setVisibility(View.GONE);
tLonSep3.setVisibility(View.GONE);
eLatSub.setVisibility(View.GONE);
eLonSub.setVisibility(View.GONE);
tLatSep1.setText(".");
tLonSep1.setText(".");
tLatSep2.setText("??");
tLonSep2.setText("??");
eLatDeg.setText(addZeros(latDeg,2));
eLatMin.setText(addZeros(latDegFrac,5));
eLonDeg.setText(addZeros(lonDeg,3));
eLonMin.setText(addZeros(lonDegFrac,5));
break;
case Min:
findViewById(R.id.coordTable).setVisibility(View.VISIBLE);
eLat.setVisibility(View.GONE);
eLon.setVisibility(View.GONE);
eLatSec.setVisibility(View.VISIBLE);
eLonSec.setVisibility(View.VISIBLE);
tLatSep3.setVisibility(View.VISIBLE);
tLonSep3.setVisibility(View.VISIBLE);
eLatSub.setVisibility(View.GONE);
eLonSub.setVisibility(View.GONE);
tLatSep1.setText("??");
tLonSep1.setText("??");
tLatSep2.setText(".");
tLonSep2.setText(".");
tLatSep3.setText("'");
tLonSep3.setText("'");
eLatDeg.setText(addZeros(latDeg,2));
eLatMin.setText(addZeros(latMin,2));
eLatSec.setText(addZeros(latMinFrac,3));
eLonDeg.setText(addZeros(lonDeg,3));
eLonMin.setText(addZeros(lonMin,2));
eLonSec.setText(addZeros(lonMinFrac,3));
break;
case Sec:
findViewById(R.id.coordTable).setVisibility(View.VISIBLE);
eLat.setVisibility(View.GONE);
eLon.setVisibility(View.GONE);
eLatSec.setVisibility(View.VISIBLE);
eLonSec.setVisibility(View.VISIBLE);
tLatSep3.setVisibility(View.VISIBLE);
tLonSep3.setVisibility(View.VISIBLE);
eLatSub.setVisibility(View.VISIBLE);
eLonSub.setVisibility(View.VISIBLE);
tLatSep1.setText("??");
tLonSep1.setText("??");
tLatSep2.setText("'");
tLonSep2.setText("'");
tLatSep3.setText(".");
tLonSep3.setText(".");
eLatDeg.setText(addZeros(latDeg,2));
eLatMin.setText(addZeros(latMin,2));
eLatSec.setText(addZeros(latSec,2));
eLatSub.setText(addZeros(latSecFrac,3));
eLonDeg.setText(addZeros(lonDeg,3));
eLonMin.setText(addZeros(lonMin,2));
eLonSec.setText(addZeros(lonSec,2));
eLonSub.setText(addZeros(lonSecFrac,3));
break;
}
}
