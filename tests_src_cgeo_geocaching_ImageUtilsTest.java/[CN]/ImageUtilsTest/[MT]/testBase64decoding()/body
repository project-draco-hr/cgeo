{
  final ByteArrayOutputStream outputStream=new ByteArrayOutputStream();
  ImageUtils.decodeBase64ToStream(icon64,outputStream);
  final byte[] decodedImage=outputStream.toByteArray();
  outputStream.close();
  assertEquals("decoded image has the right size",409,decodedImage.length);
  final InputStream originalStream=getResourceStream(R.raw.small_file);
  final byte[] originalImage=new byte[409];
  assertEquals("original image has the right size (consistency check)",409,originalStream.read(originalImage));
  originalStream.close();
  assertTrue("decoded base64 image is similar to original file data",Arrays.equals(originalImage,decodedImage));
}
