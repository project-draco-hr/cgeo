{
  SearchResult result=new SearchResult(this);
  result.geocodes.clear();
  final ArrayList<Geocache> cachesForVote=new ArrayList<Geocache>();
  final Set<Geocache> caches=DataStore.loadCaches(geocodes,LoadFlags.LOAD_CACHE_OR_DB);
  int excluded=0;
  for (  Geocache cache : caches) {
    final boolean excludeCache=(excludeDisabled && cache.isDisabled()) || (excludeMine && (cache.isOwner() || cache.isFound())) || (!cacheType.contains(cache));
    if (excludeCache) {
      excluded++;
    }
 else {
      result.addAndPutInCache(cache);
      cachesForVote.add(cache);
    }
  }
  result.setTotal(result.getTotal() - excluded);
  GCVote.loadRatings(cachesForVote);
  return result;
}
